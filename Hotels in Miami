{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {
    "collapsed": true
   },
   "source": [
    "# Data Science Capstone Final Project "
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Opening a Hotel in Miami"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Data"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "We need data from reliable sources for analysis:\n",
    " - Wikipedia List of Miami Neighborhoods: https://en.wikipedia.org/wiki/Category:Neighborhoods_in_Miami \\\n",
    " - Foursquare Developers Access to venue data: https://foursquare.com/"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Methodology"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "The methodology will include:\n",
    " - Acquire data from Wikipedia List of Miami Neighborhoods\n",
    " - Use web scraping techniques in Python to extract list of neighborhoods\n",
    " - Use Geocoder package to obtain geocoordinates for each neighborhood\n",
    " - Populate neighbhood data into a dataframe\n",
    " - Plot the neighborhoods on a map using Folium\n",
    " - Call the Foursquare API to obtain venue data and see how many venues returned for each neighborhood\n",
    " - Group the venues by neighborhood and take the mean frequency ofoccurence for each type of venue, focusin on yoga studios\n",
    " - Cluster the data using K-Means clustering to see which area has higher or lower number of yoga studios"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 151,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Requirement already satisfied: folium in /opt/conda/envs/Python36/lib/python3.6/site-packages (0.10.1)\n",
      "Requirement already satisfied: branca>=0.3.0 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from folium) (0.4.0)\n",
      "Requirement already satisfied: requests in /opt/conda/envs/Python36/lib/python3.6/site-packages (from folium) (2.21.0)\n",
      "Requirement already satisfied: jinja2>=2.9 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from folium) (2.10)\n",
      "Requirement already satisfied: numpy in /opt/conda/envs/Python36/lib/python3.6/site-packages (from folium) (1.15.4)\n",
      "Requirement already satisfied: six in /opt/conda/envs/Python36/lib/python3.6/site-packages (from branca>=0.3.0->folium) (1.12.0)\n",
      "Requirement already satisfied: urllib3<1.25,>=1.21.1 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from requests->folium) (1.24.1)\n",
      "Requirement already satisfied: idna<2.9,>=2.5 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from requests->folium) (2.8)\n",
      "Requirement already satisfied: chardet<3.1.0,>=3.0.2 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from requests->folium) (3.0.4)\n",
      "Requirement already satisfied: certifi>=2017.4.17 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from requests->folium) (2020.4.5.1)\n",
      "Requirement already satisfied: MarkupSafe>=0.23 in /opt/conda/envs/Python36/lib/python3.6/site-packages (from jinja2>=2.9->folium) (1.1.0)\n",
      "Solving environment: done\n",
      "\n",
      "# All requested packages already installed.\n",
      "\n"
     ]
    }
   ],
   "source": [
    "import pandas as pd\n",
    "import numpy as np\n",
    "import json\n",
    "import matplotlib.cm as cm\n",
    "import matplotlib.colors as colors\n",
    "!pip install folium\n",
    "import folium # map rendering library\n",
    "from sklearn.cluster import KMeans\n",
    "import urllib.request\n",
    "from bs4 import BeautifulSoup\n",
    "import requests\n",
    "from geopy.geocoders import Nominatim # convert an address into latitude and longitude values\n",
    "!conda install -c conda-forge geocoder -y\n",
    "import geocoder # to get coordinates"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Import the Neighborhoods from Wikipedia and create a dataframe"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 325,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>index</th>\n",
       "      <th>Neighborhood</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>3</td>\n",
       "      <td>Allapattah</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>4</td>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>5</td>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>6</td>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>7</td>\n",
       "      <td>Brickell</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   index                          Neighborhood\n",
       "0      3                            Allapattah\n",
       "1      4         Arts & Entertainment District\n",
       "2      5  Biscayne Boulevard Historic District\n",
       "3      6                Biscayne Island, Miami\n",
       "4      7                              Brickell"
      ]
     },
     "execution_count": 325,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Create dataframe of Miami Neighborhoods\n",
    "data = requests.get(\"https://en.wikipedia.org/wiki/Category:Neighborhoods_in_Miami\").text\n",
    "soup = BeautifulSoup(data, 'html.parser')\n",
    "neighborhoodList = []\n",
    "for row in soup.find_all(\"div\", class_=\"mw-category\")[0].findAll(\"li\"):\n",
    "    neighborhoodList.append(row.text)\n",
    "mm_df.reset_index()\n",
    "mm_df1 = mm_df.drop([2], axis =0)\n",
    "mm_df2 = mm_df1.drop([0,1], axis = 0)\n",
    "miamidf = mm_df2.reset_index()\n",
    "miamidf.shape\n",
    "miamidf.head(5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Find the Latitudes and Longitudes"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 154,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "[[25.80215000000004, -80.22362999999996],\n",
       " [25.77481000000006, -80.19772999999998],\n",
       " [25.878823222621985, -80.16766140320783],\n",
       " [25.815823554243593, -80.18854193012609],\n",
       " [25.76428691089276, -80.19255749520372],\n",
       " [25.765775006273287, -80.18609485539598],\n",
       " [25.81052219359692, -80.1931328210923],\n",
       " [25.796809582114925, -80.27359595987755],\n",
       " [25.732330000000047, -80.25413999999995],\n",
       " [25.755330000000072, -80.22217999999998],\n",
       " [25.812234148114165, -80.19465301057959],\n",
       " [25.707075817050484, -80.25961786278785],\n",
       " [25.762710000000027, -80.31586999999996],\n",
       " [25.77505000000008, -80.19565999999998],\n",
       " [25.788190000000043, -80.25610999999998],\n",
       " [25.769130000000075, -80.18997999999993],\n",
       " [25.77481000000006, -80.19772999999998],\n",
       " [25.910870000000045, -80.20006999999998],\n",
       " [25.828640000000064, -80.19832999999994],\n",
       " [25.893779988891556, -80.16231994445744],\n",
       " [25.846002424251907, -80.17506343519538],\n",
       " [26.631030000000067, -81.87631999999996],\n",
       " [25.77481000000006, -80.19772999999998],\n",
       " [25.808993955981876, -80.19150270625843],\n",
       " [25.76986000000005, -80.20748999999995],\n",
       " [25.788050000000055, -80.20090999999996],\n",
       " [25.754639974464855, -80.2956600483291],\n",
       " [25.785580124403452, -80.21170622966713],\n",
       " [25.75556000000006, -80.20499999999998],\n",
       " [25.68590000000006, -80.40264999999994],\n",
       " [25.840880000000027, -80.17635999999999],\n",
       " [25.733249224196353, -80.24166250013259],\n",
       " [25.784820000000025, -80.17393999999996],\n",
       " [25.76814089661295, -80.38522780838566],\n",
       " [28.789390000000026, -81.25270999999998],\n",
       " [28.789390000000026, -81.25270999999998]]"
      ]
     },
     "execution_count": 154,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# define a function to get coordinates\n",
    "def get_latlng(neighborhood):\n",
    "    # initialize your variable to None\n",
    "    lat_lng_coords = None\n",
    "    # loop until you get the coordinates\n",
    "    while(lat_lng_coords is None):\n",
    "        g = geocoder.arcgis('{}, Miami, Florida'.format(neighborhood))\n",
    "        lat_lng_coords = g.latlng\n",
    "    return lat_lng_coords\n",
    "# call the function to get the coordinates, store in a new list using list comprehension\n",
    "coords = [ get_latlng(neighborhood) for neighborhood in miamidf[\"Neighborhood\"].tolist() ]\n",
    "coords"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 159,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(36, 4)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>index</th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>3</td>\n",
       "      <td>Allapattah</td>\n",
       "      <td>25.802150</td>\n",
       "      <td>-80.223630</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>4</td>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>5</td>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>25.878823</td>\n",
       "      <td>-80.167661</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>6</td>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>25.815824</td>\n",
       "      <td>-80.188542</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>7</td>\n",
       "      <td>Brickell</td>\n",
       "      <td>25.764287</td>\n",
       "      <td>-80.192557</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>8</td>\n",
       "      <td>Brickell Key</td>\n",
       "      <td>25.765775</td>\n",
       "      <td>-80.186095</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>9</td>\n",
       "      <td>Buena Vista (Miami)</td>\n",
       "      <td>25.810522</td>\n",
       "      <td>-80.193133</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>10</td>\n",
       "      <td>Central Business District (Miami)</td>\n",
       "      <td>25.796810</td>\n",
       "      <td>-80.273596</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>11</td>\n",
       "      <td>Coconut Grove</td>\n",
       "      <td>25.732330</td>\n",
       "      <td>-80.254140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>12</td>\n",
       "      <td>Coral Way</td>\n",
       "      <td>25.755330</td>\n",
       "      <td>-80.222180</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>13</td>\n",
       "      <td>Miami Design District</td>\n",
       "      <td>25.812234</td>\n",
       "      <td>-80.194653</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>14</td>\n",
       "      <td>Edgewater (Miami)</td>\n",
       "      <td>25.707076</td>\n",
       "      <td>-80.259618</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>15</td>\n",
       "      <td>Flagami</td>\n",
       "      <td>25.762710</td>\n",
       "      <td>-80.315870</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>16</td>\n",
       "      <td>Government Center (Miami)</td>\n",
       "      <td>25.775050</td>\n",
       "      <td>-80.195660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>17</td>\n",
       "      <td>Grapeland Heights</td>\n",
       "      <td>25.788190</td>\n",
       "      <td>-80.256110</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>18</td>\n",
       "      <td>Greater Downtown Miami</td>\n",
       "      <td>25.769130</td>\n",
       "      <td>-80.189980</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>19</td>\n",
       "      <td>Health District (Miami)</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>20</td>\n",
       "      <td>Liberty City (Miami)</td>\n",
       "      <td>25.910870</td>\n",
       "      <td>-80.200070</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>21</td>\n",
       "      <td>Little Haiti</td>\n",
       "      <td>25.828640</td>\n",
       "      <td>-80.198330</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>22</td>\n",
       "      <td>Little Havana</td>\n",
       "      <td>25.893780</td>\n",
       "      <td>-80.162320</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>23</td>\n",
       "      <td>Little River (Miami)</td>\n",
       "      <td>25.846002</td>\n",
       "      <td>-80.175063</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>24</td>\n",
       "      <td>Lummus Park Historic District</td>\n",
       "      <td>26.631030</td>\n",
       "      <td>-81.876320</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>25</td>\n",
       "      <td>Miami Ironside</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>26</td>\n",
       "      <td>Midtown Miami</td>\n",
       "      <td>25.808994</td>\n",
       "      <td>-80.191503</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>27</td>\n",
       "      <td>Riverside (Miami)</td>\n",
       "      <td>25.769860</td>\n",
       "      <td>-80.207490</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>28</td>\n",
       "      <td>Overtown (Miami)</td>\n",
       "      <td>25.788050</td>\n",
       "      <td>-80.200910</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>29</td>\n",
       "      <td>Park West (Miami)</td>\n",
       "      <td>25.754640</td>\n",
       "      <td>-80.295660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>30</td>\n",
       "      <td>Spring Garden (Miami)</td>\n",
       "      <td>25.785580</td>\n",
       "      <td>-80.211706</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>31</td>\n",
       "      <td>The Roads</td>\n",
       "      <td>25.755560</td>\n",
       "      <td>-80.205000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>32</td>\n",
       "      <td>Umoja Village</td>\n",
       "      <td>25.685900</td>\n",
       "      <td>-80.402650</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>33</td>\n",
       "      <td>Upper Eastside</td>\n",
       "      <td>25.840880</td>\n",
       "      <td>-80.176360</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>34</td>\n",
       "      <td>Virginia Key</td>\n",
       "      <td>25.733249</td>\n",
       "      <td>-80.241663</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>35</td>\n",
       "      <td>Watson Island</td>\n",
       "      <td>25.784820</td>\n",
       "      <td>-80.173940</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>36</td>\n",
       "      <td>West Flagler</td>\n",
       "      <td>25.768141</td>\n",
       "      <td>-80.385228</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>34</th>\n",
       "      <td>37</td>\n",
       "      <td>Wynwood</td>\n",
       "      <td>28.789390</td>\n",
       "      <td>-81.252710</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>35</th>\n",
       "      <td>38</td>\n",
       "      <td>Wynwood Art District</td>\n",
       "      <td>28.789390</td>\n",
       "      <td>-81.252710</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    index                          Neighborhood   Latitude  Longitude\n",
       "0       3                            Allapattah  25.802150 -80.223630\n",
       "1       4         Arts & Entertainment District  25.774810 -80.197730\n",
       "2       5  Biscayne Boulevard Historic District  25.878823 -80.167661\n",
       "3       6                Biscayne Island, Miami  25.815824 -80.188542\n",
       "4       7                              Brickell  25.764287 -80.192557\n",
       "5       8                          Brickell Key  25.765775 -80.186095\n",
       "6       9                   Buena Vista (Miami)  25.810522 -80.193133\n",
       "7      10     Central Business District (Miami)  25.796810 -80.273596\n",
       "8      11                         Coconut Grove  25.732330 -80.254140\n",
       "9      12                             Coral Way  25.755330 -80.222180\n",
       "10     13                 Miami Design District  25.812234 -80.194653\n",
       "11     14                     Edgewater (Miami)  25.707076 -80.259618\n",
       "12     15                               Flagami  25.762710 -80.315870\n",
       "13     16             Government Center (Miami)  25.775050 -80.195660\n",
       "14     17                     Grapeland Heights  25.788190 -80.256110\n",
       "15     18                Greater Downtown Miami  25.769130 -80.189980\n",
       "16     19               Health District (Miami)  25.774810 -80.197730\n",
       "17     20                  Liberty City (Miami)  25.910870 -80.200070\n",
       "18     21                          Little Haiti  25.828640 -80.198330\n",
       "19     22                         Little Havana  25.893780 -80.162320\n",
       "20     23                  Little River (Miami)  25.846002 -80.175063\n",
       "21     24         Lummus Park Historic District  26.631030 -81.876320\n",
       "22     25                        Miami Ironside  25.774810 -80.197730\n",
       "23     26                         Midtown Miami  25.808994 -80.191503\n",
       "24     27                     Riverside (Miami)  25.769860 -80.207490\n",
       "25     28                      Overtown (Miami)  25.788050 -80.200910\n",
       "26     29                     Park West (Miami)  25.754640 -80.295660\n",
       "27     30                 Spring Garden (Miami)  25.785580 -80.211706\n",
       "28     31                             The Roads  25.755560 -80.205000\n",
       "29     32                         Umoja Village  25.685900 -80.402650\n",
       "30     33                        Upper Eastside  25.840880 -80.176360\n",
       "31     34                          Virginia Key  25.733249 -80.241663\n",
       "32     35                         Watson Island  25.784820 -80.173940\n",
       "33     36                          West Flagler  25.768141 -80.385228\n",
       "34     37                               Wynwood  28.789390 -81.252710\n",
       "35     38                  Wynwood Art District  28.789390 -81.252710"
      ]
     },
     "execution_count": 159,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create temporary dataframe to populate the coordinates into Latitude and Longitude\n",
    "df_coords = pd.DataFrame(coords, columns=['Latitude', 'Longitude'])\n",
    "# merge the coordinates into the original dataframe\n",
    "miamidf['Latitude'] = df_coords['Latitude']\n",
    "miamidf['Longitude'] = df_coords['Longitude']\n",
    "# check the neighborhoods and the coordinates\n",
    "print(miamidf.shape)\n",
    "miamidf"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Create a Map of Miami"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 160,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "The geograpical coordinate of Miami are 25.7742658, -80.1936589.\n"
     ]
    }
   ],
   "source": [
    "#Get lat, lng of Miami\n",
    "address = 'Miami, FL'\n",
    "\n",
    "geolocator = Nominatim(user_agent=\"mm_explorer\")\n",
    "location = geolocator.geocode(address)\n",
    "latitude = location.latitude\n",
    "longitude = location.longitude\n",
    "print('The geograpical coordinate of Miami are {}, {}.'.format(latitude, longitude)) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 218,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"about:blank\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFsyNS43NzQyNjU4LCAtODAuMTkzNjU4OV0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMCwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyXzk3NzM5YWY5MjA2OTRhZmNiMGMzZDM4MDQ4MDA4ODAyID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmciLAogICAgICAgICAgICAgICAgeyJhdHRyaWJ1dGlvbiI6ICJEYXRhIGJ5IFx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZ1wiXHUwMDNlT3BlblN0cmVldE1hcFx1MDAzYy9hXHUwMDNlLCB1bmRlciBcdTAwM2NhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXHUwMDNlT0RiTFx1MDAzYy9hXHUwMDNlLiIsICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwgIm1heE5hdGl2ZVpvb20iOiAxOCwgIm1heFpvb20iOiAxOCwgIm1pblpvb20iOiAwLCAibm9XcmFwIjogZmFsc2UsICJvcGFjaXR5IjogMSwgInN1YmRvbWFpbnMiOiAiYWJjIiwgInRtcyI6IGZhbHNlfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNzkyNDEwNjNjNGUxNGVjMGIwZDIzZTAyZGI2MjVkOTYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS44MDIxNTAwMDAwMDAwNCwgLTgwLjIyMzYyOTk5OTk5OTk2XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzk1MTg3NzBhMTJkZTRkMDM5ODhlYmM4MWFhNzczMzJkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF80ZGE5ZWJkZWIxNjg0OGM0ODk3ODk3YWNkY2E1ZDgwZiA9ICQoYDxkaXYgaWQ9Imh0bWxfNGRhOWViZGViMTY4NDhjNDg5Nzg5N2FjZGNhNWQ4MGYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsbGFwYXR0YWg8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOTUxODc3MGExMmRlNGQwMzk4OGViYzgxYWE3NzMzMmQuc2V0Q29udGVudChodG1sXzRkYTllYmRlYjE2ODQ4YzQ4OTc4OTdhY2RjYTVkODBmKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl83OTI0MTA2M2M0ZTE0ZWMwYjBkMjNlMDJkYjYyNWQ5Ni5iaW5kUG9wdXAocG9wdXBfOTUxODc3MGExMmRlNGQwMzk4OGViYzgxYWE3NzMzMmQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzk3ZGI0ZDliMTdiZTQ0NWQ4NTk5YTE1ODMxNDAxYzY3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzc0ODEwMDAwMDAwMDYsIC04MC4xOTc3Mjk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8xNzE0NWVmMzNkYWE0MTE1OWY0ZmEwMDMwMGE3ZmM5YyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZTk1MWFiOWU2ODRiNGZiM2E0YmMzZDQ3ZjA1OTIzZTUgPSAkKGA8ZGl2IGlkPSJodG1sX2U5NTFhYjllNjg0YjRmYjNhNGJjM2Q0N2YwNTkyM2U1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5BcnRzICZhbXA7IEVudGVydGFpbm1lbnQgRGlzdHJpY3Q8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMTcxNDVlZjMzZGFhNDExNTlmNGZhMDAzMDBhN2ZjOWMuc2V0Q29udGVudChodG1sX2U5NTFhYjllNjg0YjRmYjNhNGJjM2Q0N2YwNTkyM2U1KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl85N2RiNGQ5YjE3YmU0NDVkODU5OWExNTgzMTQwMWM2Ny5iaW5kUG9wdXAocG9wdXBfMTcxNDVlZjMzZGFhNDExNTlmNGZhMDAzMDBhN2ZjOWMpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA3ZGFkMjdhMmIyMTQxZDVhZjY1ZmVjZmEwYTMwMDQ1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODc4ODIzMjIyNjIxOTg1LCAtODAuMTY3NjYxNDAzMjA3ODNdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNzk5ZWFhMmJkNjliNGQxZDkyODA0YzI0NzM2Y2VkZDggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzFkNmU0NjY0NGFhYzQ1NjQ4YWZjMWM3ZjExODU4YTFjID0gJChgPGRpdiBpZD0iaHRtbF8xZDZlNDY2NDRhYWM0NTY0OGFmYzFjN2YxMTg1OGExYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QmlzY2F5bmUgQm91bGV2YXJkIEhpc3RvcmljIERpc3RyaWN0PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzc5OWVhYTJiZDY5YjRkMWQ5MjgwNGMyNDczNmNlZGQ4LnNldENvbnRlbnQoaHRtbF8xZDZlNDY2NDRhYWM0NTY0OGFmYzFjN2YxMTg1OGExYyk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfMDdkYWQyN2EyYjIxNDFkNWFmNjVmZWNmYTBhMzAwNDUuYmluZFBvcHVwKHBvcHVwXzc5OWVhYTJiZDY5YjRkMWQ5MjgwNGMyNDczNmNlZGQ4KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lOWRmZWU0ZTIwZDQ0ZjdlYjExZTc5ZWM4OTIyODE0MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjgxNTgyMzU1NDI0MzU5MywgLTgwLjE4ODU0MTkzMDEyNjA5XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzBhNTg1YmVjM2UwZjRmZGY4OTgyYWVhZDc1OGY3MTE2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81ODE0YjYwNzlmOTE0MjQxYjExMDU4NTY1ODNjMzJjNSA9ICQoYDxkaXYgaWQ9Imh0bWxfNTgxNGI2MDc5ZjkxNDI0MWIxMTA1ODU2NTgzYzMyYzUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJpc2NheW5lIElzbGFuZCwgTWlhbWk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMGE1ODViZWMzZTBmNGZkZjg5ODJhZWFkNzU4ZjcxMTYuc2V0Q29udGVudChodG1sXzU4MTRiNjA3OWY5MTQyNDFiMTEwNTg1NjU4M2MzMmM1KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9lOWRmZWU0ZTIwZDQ0ZjdlYjExZTc5ZWM4OTIyODE0My5iaW5kUG9wdXAocG9wdXBfMGE1ODViZWMzZTBmNGZkZjg5ODJhZWFkNzU4ZjcxMTYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzZlZjJjYzhiMTc2YzRkOGNiYmM1MWMyNTM3NWRmM2UyID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzY0Mjg2OTEwODkyNzYsIC04MC4xOTI1NTc0OTUyMDM3Ml0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9jZGJhNzU3MDVhMWQ0ODVjYmVlODQ1ZjhlYTIxNTc3NSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfY2QxZjE1ZTVmNzYwNDI3ODljYWQwNzc1YjkwYmI1ZGEgPSAkKGA8ZGl2IGlkPSJodG1sX2NkMWYxNWU1Zjc2MDQyNzg5Y2FkMDc3NWI5MGJiNWRhIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ccmlja2VsbDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jZGJhNzU3MDVhMWQ0ODVjYmVlODQ1ZjhlYTIxNTc3NS5zZXRDb250ZW50KGh0bWxfY2QxZjE1ZTVmNzYwNDI3ODljYWQwNzc1YjkwYmI1ZGEpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzZlZjJjYzhiMTc2YzRkOGNiYmM1MWMyNTM3NWRmM2UyLmJpbmRQb3B1cChwb3B1cF9jZGJhNzU3MDVhMWQ0ODVjYmVlODQ1ZjhlYTIxNTc3NSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMmYwM2I3NDMyM2FmNDc0ZDg2OGVhOGM3MjE5ZmQ0MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43NjU3NzUwMDYyNzMyODcsIC04MC4xODYwOTQ4NTUzOTU5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF85Y2Y3YWI5ZTkwMDU0N2UwOGMyMmI3NDI2ODQwN2YwOSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNmFhNTA5NTdiOGUyNGUzODhlMWI1ZmZiN2RjMTQzMjkgPSAkKGA8ZGl2IGlkPSJodG1sXzZhYTUwOTU3YjhlMjRlMzg4ZTFiNWZmYjdkYzE0MzI5IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Ccmlja2VsbCBLZXk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOWNmN2FiOWU5MDA1NDdlMDhjMjJiNzQyNjg0MDdmMDkuc2V0Q29udGVudChodG1sXzZhYTUwOTU3YjhlMjRlMzg4ZTFiNWZmYjdkYzE0MzI5KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8yZjAzYjc0MzIzYWY0NzRkODY4ZWE4YzcyMTlmZDQyNC5iaW5kUG9wdXAocG9wdXBfOWNmN2FiOWU5MDA1NDdlMDhjMjJiNzQyNjg0MDdmMDkpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2QwYzAzYmVkMzQ3OTQ3YmE4ODAxMmIyODY5MGQ5Mzg0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODEwNTIyMTkzNTk2OTIsIC04MC4xOTMxMzI4MjEwOTIzXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzU4ZmJhNzdjYmIxNzQzODE4YWYxNDJlMjlkZWZlMGU5ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hYzQ5Mzg5ZmNhODc0M2MwYjE1ZmE0MzQzZWE4OThmZSA9ICQoYDxkaXYgaWQ9Imh0bWxfYWM0OTM4OWZjYTg3NDNjMGIxNWZhNDM0M2VhODk4ZmUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJ1ZW5hIFZpc3RhIChNaWFtaSk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNThmYmE3N2NiYjE3NDM4MThhZjE0MmUyOWRlZmUwZTkuc2V0Q29udGVudChodG1sX2FjNDkzODlmY2E4NzQzYzBiMTVmYTQzNDNlYTg5OGZlKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9kMGMwM2JlZDM0Nzk0N2JhODgwMTJiMjg2OTBkOTM4NC5iaW5kUG9wdXAocG9wdXBfNThmYmE3N2NiYjE3NDM4MThhZjE0MmUyOWRlZmUwZTkpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ViODg4MzI1YTU4MDQzOGRiN2YwOGZjYTZhNGVlZjkzID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzk2ODA5NTgyMTE0OTI1LCAtODAuMjczNTk1OTU5ODc3NTVdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNjZhODhiMjI3MDJmNDg4Y2ExODE3MTQ0ZTM0Zjk2YTUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzg4ZTJhOTEzZDkxYTRmNmRhMTQyZThiY2ZjOWEzZDk2ID0gJChgPGRpdiBpZD0iaHRtbF84OGUyYTkxM2Q5MWE0ZjZkYTE0MmU4YmNmYzlhM2Q5NiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q2VudHJhbCBCdXNpbmVzcyBEaXN0cmljdCAoTWlhbWkpPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzY2YTg4YjIyNzAyZjQ4OGNhMTgxNzE0NGUzNGY5NmE1LnNldENvbnRlbnQoaHRtbF84OGUyYTkxM2Q5MWE0ZjZkYTE0MmU4YmNmYzlhM2Q5Nik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZWI4ODgzMjVhNTgwNDM4ZGI3ZjA4ZmNhNmE0ZWVmOTMuYmluZFBvcHVwKHBvcHVwXzY2YTg4YjIyNzAyZjQ4OGNhMTgxNzE0NGUzNGY5NmE1KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mYzI0OWRjZDM5MGE0ZmEyYjdlMzU0ZjVmNjAzN2Y0NiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjczMjMzMDAwMDAwMDA0NywgLTgwLjI1NDEzOTk5OTk5OTk1XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzgzZWI1ZGM5MmE4NTQ1ZGJiNmQyZGUxYTM0NGY5NmFhID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9iN2FkNzk3ZWM0ZmY0NzUwYmMxZDYyMWU3ZmY5MGI5NiA9ICQoYDxkaXYgaWQ9Imh0bWxfYjdhZDc5N2VjNGZmNDc1MGJjMWQ2MjFlN2ZmOTBiOTYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNvY29udXQgR3JvdmU8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfODNlYjVkYzkyYTg1NDVkYmI2ZDJkZTFhMzQ0Zjk2YWEuc2V0Q29udGVudChodG1sX2I3YWQ3OTdlYzRmZjQ3NTBiYzFkNjIxZTdmZjkwYjk2KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9mYzI0OWRjZDM5MGE0ZmEyYjdlMzU0ZjVmNjAzN2Y0Ni5iaW5kUG9wdXAocG9wdXBfODNlYjVkYzkyYTg1NDVkYmI2ZDJkZTFhMzQ0Zjk2YWEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2U1OGE2NGI2MzliMDQ4YTFiZmQ4ODJiYjZmNjg4ODdjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzU1MzMwMDAwMDAwMDcyLCAtODAuMjIyMTc5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZGZmYTZhZDc2NTQ4NDI1ZGJmNDhmM2UzZjFkY2E0NTUgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzBkMjJlNTIxMzFlZjRmMDhhOGYxYWUzMDZkZGU2OTg5ID0gJChgPGRpdiBpZD0iaHRtbF8wZDIyZTUyMTMxZWY0ZjA4YThmMWFlMzA2ZGRlNjk4OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q29yYWwgV2F5PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2RmZmE2YWQ3NjU0ODQyNWRiZjQ4ZjNlM2YxZGNhNDU1LnNldENvbnRlbnQoaHRtbF8wZDIyZTUyMTMxZWY0ZjA4YThmMWFlMzA2ZGRlNjk4OSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZTU4YTY0YjYzOWIwNDhhMWJmZDg4MmJiNmY2ODg4N2MuYmluZFBvcHVwKHBvcHVwX2RmZmE2YWQ3NjU0ODQyNWRiZjQ4ZjNlM2YxZGNhNDU1KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kNTdhNTdlNDUwZWM0MDE4ODUyMjcwNzBkMDYzODNiMiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjgxMjIzNDE0ODExNDE2NSwgLTgwLjE5NDY1MzAxMDU3OTU5XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2JlOTg3ZDBiY2NhZTQ2MTViYTQ1MzhkMDY4ZmZjZjMwID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9mODEzYjQzYjE2NDA0ZWMwOTA1ZmIxMzM0ZDg5MDBkMCA9ICQoYDxkaXYgaWQ9Imh0bWxfZjgxM2I0M2IxNjQwNGVjMDkwNWZiMTMzNGQ4OTAwZDAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1pYW1pIERlc2lnbiBEaXN0cmljdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9iZTk4N2QwYmNjYWU0NjE1YmE0NTM4ZDA2OGZmY2YzMC5zZXRDb250ZW50KGh0bWxfZjgxM2I0M2IxNjQwNGVjMDkwNWZiMTMzNGQ4OTAwZDApOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2Q1N2E1N2U0NTBlYzQwMTg4NTIyNzA3MGQwNjM4M2IyLmJpbmRQb3B1cChwb3B1cF9iZTk4N2QwYmNjYWU0NjE1YmE0NTM4ZDA2OGZmY2YzMCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNGNkODYzM2ZjZjU3NDg1NmE3N2JmMjczMTQ4NTVkNWUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43MDcwNzU4MTcwNTA0ODQsIC04MC4yNTk2MTc4NjI3ODc4NV0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9kNTBjMTY2NTE1ZTM0YmUxYjhlYWNmMDg4MjljY2ZkZCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOTkxNTZkNjIxNWU0NDUzNmJhYzlkMzliMDU0NzkwNDQgPSAkKGA8ZGl2IGlkPSJodG1sXzk5MTU2ZDYyMTVlNDQ1MzZiYWM5ZDM5YjA1NDc5MDQ0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FZGdld2F0ZXIgKE1pYW1pKTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9kNTBjMTY2NTE1ZTM0YmUxYjhlYWNmMDg4MjljY2ZkZC5zZXRDb250ZW50KGh0bWxfOTkxNTZkNjIxNWU0NDUzNmJhYzlkMzliMDU0NzkwNDQpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzRjZDg2MzNmY2Y1NzQ4NTZhNzdiZjI3MzE0ODU1ZDVlLmJpbmRQb3B1cChwb3B1cF9kNTBjMTY2NTE1ZTM0YmUxYjhlYWNmMDg4MjljY2ZkZCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDA5MDUzODNhMzZmNDBlZThiNjY1ZWU2MjBkZDM2NjMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43NjI3MTAwMDAwMDAwMjcsIC04MC4zMTU4Njk5OTk5OTk5Nl0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9mMmEwYTRjM2IxNmE0NjM3YTVhYjE3ZDMzM2I5MWU4ZSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYWZlMDY2Njc4ZTQ4NGE2NzkyNzJlZGY2YzViZGQ2NWUgPSAkKGA8ZGl2IGlkPSJodG1sX2FmZTA2NjY3OGU0ODRhNjc5MjcyZWRmNmM1YmRkNjVlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5GbGFnYW1pPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2YyYTBhNGMzYjE2YTQ2MzdhNWFiMTdkMzMzYjkxZThlLnNldENvbnRlbnQoaHRtbF9hZmUwNjY2NzhlNDg0YTY3OTI3MmVkZjZjNWJkZDY1ZSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZDA5MDUzODNhMzZmNDBlZThiNjY1ZWU2MjBkZDM2NjMuYmluZFBvcHVwKHBvcHVwX2YyYTBhNGMzYjE2YTQ2MzdhNWFiMTdkMzMzYjkxZThlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9kNWExN2E4NDA4NTE0YzczOTA0NzQyNGUxNmM1NTlkYSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc3NTA1MDAwMDAwMDA4LCAtODAuMTk1NjU5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNmI4NzdlNmVkOGI5NDAyYTg5YzczYTk4MGY5OGViODcgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzUxY2I4YmZjYjhjZTRiNDU4YWJmZWJkM2VjNjNhOGViID0gJChgPGRpdiBpZD0iaHRtbF81MWNiOGJmY2I4Y2U0YjQ1OGFiZmViZDNlYzYzYThlYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R292ZXJubWVudCBDZW50ZXIgKE1pYW1pKTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF82Yjg3N2U2ZWQ4Yjk0MDJhODljNzNhOTgwZjk4ZWI4Ny5zZXRDb250ZW50KGh0bWxfNTFjYjhiZmNiOGNlNGI0NThhYmZlYmQzZWM2M2E4ZWIpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2Q1YTE3YTg0MDg1MTRjNzM5MDQ3NDI0ZTE2YzU1OWRhLmJpbmRQb3B1cChwb3B1cF82Yjg3N2U2ZWQ4Yjk0MDJhODljNzNhOTgwZjk4ZWI4NykKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfMzFmNmIyOTk4YmY2NGUwMzhkYzJhOTlhZjU1OGVkYjkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43ODgxOTAwMDAwMDAwNDMsIC04MC4yNTYxMDk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9jMDZiNzYwOWNiOGE0MjU4OTNlMmQwODBlNmFkMTc4MSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZWUwNGZmNzA0MzgzNGM5MWIxOWJlNjE3ZDQ3MTg4M2IgPSAkKGA8ZGl2IGlkPSJodG1sX2VlMDRmZjcwNDM4MzRjOTFiMTliZTYxN2Q0NzE4ODNiIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmFwZWxhbmQgSGVpZ2h0czwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jMDZiNzYwOWNiOGE0MjU4OTNlMmQwODBlNmFkMTc4MS5zZXRDb250ZW50KGh0bWxfZWUwNGZmNzA0MzgzNGM5MWIxOWJlNjE3ZDQ3MTg4M2IpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzMxZjZiMjk5OGJmNjRlMDM4ZGMyYTk5YWY1NThlZGI5LmJpbmRQb3B1cChwb3B1cF9jMDZiNzYwOWNiOGE0MjU4OTNlMmQwODBlNmFkMTc4MSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODg3MGQwMmE2MjlhNDA0ODg0ZDkzY2NiMDY5YzNhOTkgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43NjkxMzAwMDAwMDAwNzUsIC04MC4xODk5Nzk5OTk5OTk5M10sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF82MmU1MmYwODEyNzY0YjM0OGVhNDJkNWIyYzJmMDBmMSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMDU3YjM5ZmEzOTAxNGUyYWFiZTE4NTdhNTA0ODBhZDMgPSAkKGA8ZGl2IGlkPSJodG1sXzA1N2IzOWZhMzkwMTRlMmFhYmUxODU3YTUwNDgwYWQzIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmVhdGVyIERvd250b3duIE1pYW1pPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzYyZTUyZjA4MTI3NjRiMzQ4ZWE0MmQ1YjJjMmYwMGYxLnNldENvbnRlbnQoaHRtbF8wNTdiMzlmYTM5MDE0ZTJhYWJlMTg1N2E1MDQ4MGFkMyk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfODg3MGQwMmE2MjlhNDA0ODg0ZDkzY2NiMDY5YzNhOTkuYmluZFBvcHVwKHBvcHVwXzYyZTUyZjA4MTI3NjRiMzQ4ZWE0MmQ1YjJjMmYwMGYxKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8wZThjYmM2YjQ2Y2U0OTA2OWEwMjdhNWI2YjRjNDEzNyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc3NDgxMDAwMDAwMDA2LCAtODAuMTk3NzI5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNTU5NWJjMGY5NmY1NDk5MWE1ZmI2NWQ5MDk4MTE2M2MgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2UyNTUwODBhM2VlNDQ4YmZhZDc0MmFmNjI2OWRmN2VjID0gJChgPGRpdiBpZD0iaHRtbF9lMjU1MDgwYTNlZTQ0OGJmYWQ3NDJhZjYyNjlkZjdlYyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+SGVhbHRoIERpc3RyaWN0IChNaWFtaSk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNTU5NWJjMGY5NmY1NDk5MWE1ZmI2NWQ5MDk4MTE2M2Muc2V0Q29udGVudChodG1sX2UyNTUwODBhM2VlNDQ4YmZhZDc0MmFmNjI2OWRmN2VjKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8wZThjYmM2YjQ2Y2U0OTA2OWEwMjdhNWI2YjRjNDEzNy5iaW5kUG9wdXAocG9wdXBfNTU5NWJjMGY5NmY1NDk5MWE1ZmI2NWQ5MDk4MTE2M2MpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzExYWUxZWM0MThhMjQ0YjFiMGEzY2NlMDZlNDQ4YjAxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuOTEwODcwMDAwMDAwMDQ1LCAtODAuMjAwMDY5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfODA4NGVhYzcwMGRhNGQ5OTlmZTkwYWI2ODNlZjYxZjEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzdkYzM3OGIwMDI3MzQ1NzU5Y2ExN2NlNTU3YmYwYzRiID0gJChgPGRpdiBpZD0iaHRtbF83ZGMzNzhiMDAyNzM0NTc1OWNhMTdjZTU1N2JmMGM0YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGliZXJ0eSBDaXR5IChNaWFtaSk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfODA4NGVhYzcwMGRhNGQ5OTlmZTkwYWI2ODNlZjYxZjEuc2V0Q29udGVudChodG1sXzdkYzM3OGIwMDI3MzQ1NzU5Y2ExN2NlNTU3YmYwYzRiKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8xMWFlMWVjNDE4YTI0NGIxYjBhM2NjZTA2ZTQ0OGIwMS5iaW5kUG9wdXAocG9wdXBfODA4NGVhYzcwMGRhNGQ5OTlmZTkwYWI2ODNlZjYxZjEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q0NzY3ZWY4ZWMzNDQ3NzA4YjVjNzdlOTc5MmE1YmNkID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODI4NjQwMDAwMDAwMDY0LCAtODAuMTk4MzI5OTk5OTk5OTRdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZDg0MGY3YjAwMGEyNGViY2IwNmY3MDVhNjdhMTc3NWEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzEzNWU1YmYwMWQzNTQxOTE5MmQxMTNjMjJjNjIzNDY4ID0gJChgPGRpdiBpZD0iaHRtbF8xMzVlNWJmMDFkMzU0MTkxOTJkMTEzYzIyYzYyMzQ2OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIEhhaXRpPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2Q4NDBmN2IwMDBhMjRlYmNiMDZmNzA1YTY3YTE3NzVhLnNldENvbnRlbnQoaHRtbF8xMzVlNWJmMDFkMzU0MTkxOTJkMTEzYzIyYzYyMzQ2OCk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZDQ3NjdlZjhlYzM0NDc3MDhiNWM3N2U5NzkyYTViY2QuYmluZFBvcHVwKHBvcHVwX2Q4NDBmN2IwMDBhMjRlYmNiMDZmNzA1YTY3YTE3NzVhKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80ZjI0MDU0ZWExNGM0MzRlOGM1YzdiMDJjMDIyZjIyMyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljg5Mzc3OTk4ODg5MTU1NiwgLTgwLjE2MjMxOTk0NDQ1NzQ0XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2YwMzMxNTM1OTVhOTQ4MDJhNmY0OTk2ZjM2N2IyOTI0ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81NmM3NzM0ZTNmNDc0ZGNlOWQ4MTRhMmQ4ZjRiZmQ1NyA9ICQoYDxkaXYgaWQ9Imh0bWxfNTZjNzczNGUzZjQ3NGRjZTlkODE0YTJkOGY0YmZkNTciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxpdHRsZSBIYXZhbmE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjAzMzE1MzU5NWE5NDgwMmE2ZjQ5OTZmMzY3YjI5MjQuc2V0Q29udGVudChodG1sXzU2Yzc3MzRlM2Y0NzRkY2U5ZDgxNGEyZDhmNGJmZDU3KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl80ZjI0MDU0ZWExNGM0MzRlOGM1YzdiMDJjMDIyZjIyMy5iaW5kUG9wdXAocG9wdXBfZjAzMzE1MzU5NWE5NDgwMmE2ZjQ5OTZmMzY3YjI5MjQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2VkOTg2NjQwZGMzNzRiMTdiYjM0ZjNlZjhkNTIzNzE3ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODQ2MDAyNDI0MjUxOTA3LCAtODAuMTc1MDYzNDM1MTk1MzhdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZTlhZTg3N2QyZDZhNDFkZWE5YTUyMWE2ODc0YzdlZWYgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzczYzZhNjNiMjM5NjRjNjA4OGI5MDk5YjI2NjdmOGNlID0gJChgPGRpdiBpZD0iaHRtbF83M2M2YTYzYjIzOTY0YzYwODhiOTA5OWIyNjY3ZjhjZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFJpdmVyIChNaWFtaSk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZTlhZTg3N2QyZDZhNDFkZWE5YTUyMWE2ODc0YzdlZWYuc2V0Q29udGVudChodG1sXzczYzZhNjNiMjM5NjRjNjA4OGI5MDk5YjI2NjdmOGNlKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9lZDk4NjY0MGRjMzc0YjE3YmIzNGYzZWY4ZDUyMzcxNy5iaW5kUG9wdXAocG9wdXBfZTlhZTg3N2QyZDZhNDFkZWE5YTUyMWE2ODc0YzdlZWYpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQxY2Y3YWE5NTMzMTQ3NTliYzE1OGNhOGVlNzUwMzU4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjYuNjMxMDMwMDAwMDAwMDY3LCAtODEuODc2MzE5OTk5OTk5OTZdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYmQ5MTI3OWFmNjhmNDRjYWI0Yjc2NDc1OTc5ZDY3MTIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2M1YWNiYWM1YzhiYzQ3YjliYzYxYjVmN2MzYjUwNzFiID0gJChgPGRpdiBpZD0iaHRtbF9jNWFjYmFjNWM4YmM0N2I5YmM2MWI1ZjdjM2I1MDcxYiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+THVtbXVzIFBhcmsgSGlzdG9yaWMgRGlzdHJpY3Q8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfYmQ5MTI3OWFmNjhmNDRjYWI0Yjc2NDc1OTc5ZDY3MTIuc2V0Q29udGVudChodG1sX2M1YWNiYWM1YzhiYzQ3YjliYzYxYjVmN2MzYjUwNzFiKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl80MWNmN2FhOTUzMzE0NzU5YmMxNThjYThlZTc1MDM1OC5iaW5kUG9wdXAocG9wdXBfYmQ5MTI3OWFmNjhmNDRjYWI0Yjc2NDc1OTc5ZDY3MTIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzdlZDgwN2E0NTNlYzQzODdiOWY2MThmMDBmYzVjYzAxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzc0ODEwMDAwMDAwMDYsIC04MC4xOTc3Mjk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8wY2Q0YTAxZTY4NDU0YWViODhkZTVlZWZjY2Y1N2VjYyA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNzdiYmNjNDZjNWNiNGFkMjkwYTZjZWJlMDQyYmNiOTIgPSAkKGA8ZGl2IGlkPSJodG1sXzc3YmJjYzQ2YzVjYjRhZDI5MGE2Y2ViZTA0MmJjYjkyIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NaWFtaSBJcm9uc2lkZTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8wY2Q0YTAxZTY4NDU0YWViODhkZTVlZWZjY2Y1N2VjYy5zZXRDb250ZW50KGh0bWxfNzdiYmNjNDZjNWNiNGFkMjkwYTZjZWJlMDQyYmNiOTIpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzdlZDgwN2E0NTNlYzQzODdiOWY2MThmMDBmYzVjYzAxLmJpbmRQb3B1cChwb3B1cF8wY2Q0YTAxZTY4NDU0YWViODhkZTVlZWZjY2Y1N2VjYykKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfNjFiMTc2ZjhjZWQ1NGEzZDkzYjY0NTU2M2I4MzFlYzAgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS44MDg5OTM5NTU5ODE4NzYsIC04MC4xOTE1MDI3MDYyNTg0M10sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9mY2E3MDU2OTQ2NDQ0MGM1OWEyNTcyMTVlMzMxZTNkMiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMDhlMTMwNTI4MzdlNDczMmJlN2I5YmJmODg2ZjM5ODUgPSAkKGA8ZGl2IGlkPSJodG1sXzA4ZTEzMDUyODM3ZTQ3MzJiZTdiOWJiZjg4NmYzOTg1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NaWR0b3duIE1pYW1pPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2ZjYTcwNTY5NDY0NDQwYzU5YTI1NzIxNWUzMzFlM2QyLnNldENvbnRlbnQoaHRtbF8wOGUxMzA1MjgzN2U0NzMyYmU3YjliYmY4ODZmMzk4NSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfNjFiMTc2ZjhjZWQ1NGEzZDkzYjY0NTU2M2I4MzFlYzAuYmluZFBvcHVwKHBvcHVwX2ZjYTcwNTY5NDY0NDQwYzU5YTI1NzIxNWUzMzFlM2QyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hNDU1MmE4Yjc3Yjk0OWQwYTM5NGQ4MDEyYmRiYjk3YiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc2OTg2MDAwMDAwMDA1LCAtODAuMjA3NDg5OTk5OTk5OTVdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYTQwNjk3NWMxOWFlNGVkOGEzMDAyNmJjYmU0ZjliOTAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2EzMjVkMDY5OWZkNzQzYzI4MmM0ZDdhNjk3MWQ2Y2I0ID0gJChgPGRpdiBpZD0iaHRtbF9hMzI1ZDA2OTlmZDc0M2MyODJjNGQ3YTY5NzFkNmNiNCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Uml2ZXJzaWRlIChNaWFtaSk8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfYTQwNjk3NWMxOWFlNGVkOGEzMDAyNmJjYmU0ZjliOTAuc2V0Q29udGVudChodG1sX2EzMjVkMDY5OWZkNzQzYzI4MmM0ZDdhNjk3MWQ2Y2I0KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9hNDU1MmE4Yjc3Yjk0OWQwYTM5NGQ4MDEyYmRiYjk3Yi5iaW5kUG9wdXAocG9wdXBfYTQwNjk3NWMxOWFlNGVkOGEzMDAyNmJjYmU0ZjliOTApCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzdmOGRhYTc0Y2I2YjQ0YThhZmE4ZmJmYzljYTNmMzc5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzg4MDUwMDAwMDAwMDU1LCAtODAuMjAwOTA5OTk5OTk5OTZdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNGY3ODczYTMwZTBjNDFkMThkMTM3OTAxMzc2YzI5OWMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzM2ZThlMzIyNThmMzQ0NmM5OTJlZTk2MDNlNzlhNmI4ID0gJChgPGRpdiBpZD0iaHRtbF8zNmU4ZTMyMjU4ZjM0NDZjOTkyZWU5NjAzZTc5YTZiOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+T3ZlcnRvd24gKE1pYW1pKTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF80Zjc4NzNhMzBlMGM0MWQxOGQxMzc5MDEzNzZjMjk5Yy5zZXRDb250ZW50KGh0bWxfMzZlOGUzMjI1OGYzNDQ2Yzk5MmVlOTYwM2U3OWE2YjgpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzdmOGRhYTc0Y2I2YjQ0YThhZmE4ZmJmYzljYTNmMzc5LmJpbmRQb3B1cChwb3B1cF80Zjc4NzNhMzBlMGM0MWQxOGQxMzc5MDEzNzZjMjk5YykKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfM2UxMDg0YTA3ZTBkNGU0N2EwMjJiZWUxZmQ3ZGQwNGIgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43NTQ2Mzk5NzQ0NjQ4NTUsIC04MC4yOTU2NjAwNDgzMjkxXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2IyNjEwNDhlMmU2MTQxNmViMTM3YTRkMDEwOTI1MDNkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8zZDllMWE4ZmQwZTQ0ZTI5OTZhYjE0NjY1NmJlNDM2NiA9ICQoYDxkaXYgaWQ9Imh0bWxfM2Q5ZTFhOGZkMGU0NGUyOTk2YWIxNDY2NTZiZTQzNjYiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlBhcmsgV2VzdCAoTWlhbWkpPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2IyNjEwNDhlMmU2MTQxNmViMTM3YTRkMDEwOTI1MDNkLnNldENvbnRlbnQoaHRtbF8zZDllMWE4ZmQwZTQ0ZTI5OTZhYjE0NjY1NmJlNDM2Nik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfM2UxMDg0YTA3ZTBkNGU0N2EwMjJiZWUxZmQ3ZGQwNGIuYmluZFBvcHVwKHBvcHVwX2IyNjEwNDhlMmU2MTQxNmViMTM3YTRkMDEwOTI1MDNkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mZmE4MThhNTMxMzM0YzAzYjM1NjBkNzVmMjM3NzZmYiA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc4NTU4MDEyNDQwMzQ1MiwgLTgwLjIxMTcwNjIyOTY2NzEzXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzM1MjMzY2Y4ODhhYjQ1NzVhMWE2MzZiYjE4ZTBkYjkwID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xMTEyOGM4NjVhY2Q0ZWI5YTYyY2Y4ZDhlOGNhMDAzOSA9ICQoYDxkaXYgaWQ9Imh0bWxfMTExMjhjODY1YWNkNGViOWE2MmNmOGQ4ZThjYTAwMzkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNwcmluZyBHYXJkZW4gKE1pYW1pKTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8zNTIzM2NmODg4YWI0NTc1YTFhNjM2YmIxOGUwZGI5MC5zZXRDb250ZW50KGh0bWxfMTExMjhjODY1YWNkNGViOWE2MmNmOGQ4ZThjYTAwMzkpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2ZmYTgxOGE1MzEzMzRjMDNiMzU2MGQ3NWYyMzc3NmZiLmJpbmRQb3B1cChwb3B1cF8zNTIzM2NmODg4YWI0NTc1YTFhNjM2YmIxOGUwZGI5MCkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfOTE5OTc1MTYyOThiNDNjNzgyNzQ4YjNkY2UwOWU5OGMgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43NTU1NjAwMDAwMDAwNiwgLTgwLjIwNDk5OTk5OTk5OTk4XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2JhNDc2ZWEyOGY2ODQ2NDY4OTQyMjRjY2YzMTBmN2YyID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8yYTVlMWYxZjhhMTA0N2ViYTIyMDEyNzVlYzRhZGVlOSA9ICQoYDxkaXYgaWQ9Imh0bWxfMmE1ZTFmMWY4YTEwNDdlYmEyMjAxMjc1ZWM0YWRlZTkiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlRoZSBSb2FkczwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9iYTQ3NmVhMjhmNjg0NjQ2ODk0MjI0Y2NmMzEwZjdmMi5zZXRDb250ZW50KGh0bWxfMmE1ZTFmMWY4YTEwNDdlYmEyMjAxMjc1ZWM0YWRlZTkpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzkxOTk3NTE2Mjk4YjQzYzc4Mjc0OGIzZGNlMDllOThjLmJpbmRQb3B1cChwb3B1cF9iYTQ3NmVhMjhmNjg0NjQ2ODk0MjI0Y2NmMzEwZjdmMikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODVkYjQ3YWUwY2UxNDIzNmI5MGYxMmRmNTMzOTY3MjQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS42ODU5MDAwMDAwMDAwNiwgLTgwLjQwMjY0OTk5OTk5OTk0XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzAxODhmMWQyZDJlNjRlMzU5YWVlYWVlY2U3MTZiMjAxID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF82MDA4YjdiN2VjNTg0NjkwODMyNTJiM2FhYzY0OTZhZCA9ICQoYDxkaXYgaWQ9Imh0bWxfNjAwOGI3YjdlYzU4NDY5MDgzMjUyYjNhYWM2NDk2YWQiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlVtb2phIFZpbGxhZ2U8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMDE4OGYxZDJkMmU2NGUzNTlhZWVhZWVjZTcxNmIyMDEuc2V0Q29udGVudChodG1sXzYwMDhiN2I3ZWM1ODQ2OTA4MzI1MmIzYWFjNjQ5NmFkKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl84NWRiNDdhZTBjZTE0MjM2YjkwZjEyZGY1MzM5NjcyNC5iaW5kUG9wdXAocG9wdXBfMDE4OGYxZDJkMmU2NGUzNTlhZWVhZWVjZTcxNmIyMDEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzA2MzE3NDIyMjA4ZjRhODliMDMwMzUzZjg4MjE2ZjY4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODQwODgwMDAwMDAwMDI3LCAtODAuMTc2MzU5OTk5OTk5OTldLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZWRiNTA5M2M5YTk5NDk3MDg1ZTUyYzJiNmYzOGE0NmQgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzM3NjYwNzBiOTJkMjQ1Njk4ZmZiMWMzNDliMmEwMTQ3ID0gJChgPGRpdiBpZD0iaHRtbF8zNzY2MDcwYjkyZDI0NTY5OGZmYjFjMzQ5YjJhMDE0NyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgRWFzdHNpZGU8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZWRiNTA5M2M5YTk5NDk3MDg1ZTUyYzJiNmYzOGE0NmQuc2V0Q29udGVudChodG1sXzM3NjYwNzBiOTJkMjQ1Njk4ZmZiMWMzNDliMmEwMTQ3KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8wNjMxNzQyMjIwOGY0YTg5YjAzMDM1M2Y4ODIxNmY2OC5iaW5kUG9wdXAocG9wdXBfZWRiNTA5M2M5YTk5NDk3MDg1ZTUyYzJiNmYzOGE0NmQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzQxZjAxNTkxM2I0NDQ5MTJiZTIyOTk4YzY3NGJiOTA1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzMzMjQ5MjI0MTk2MzUzLCAtODAuMjQxNjYyNTAwMTMyNTldLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNWFlMzQ2OTE1MGViNDAwN2E2NmIwMGE1MTg4OTkyOTMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzdiY2M1MmU1NzgyYjRmMDM5NWRmNzQ4NmRiZDEzYTk5ID0gJChgPGRpdiBpZD0iaHRtbF83YmNjNTJlNTc4MmI0ZjAzOTVkZjc0ODZkYmQxM2E5OSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VmlyZ2luaWEgS2V5PC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzVhZTM0NjkxNTBlYjQwMDdhNjZiMDBhNTE4ODk5MjkzLnNldENvbnRlbnQoaHRtbF83YmNjNTJlNTc4MmI0ZjAzOTVkZjc0ODZkYmQxM2E5OSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfNDFmMDE1OTEzYjQ0NDkxMmJlMjI5OThjNjc0YmI5MDUuYmluZFBvcHVwKHBvcHVwXzVhZTM0NjkxNTBlYjQwMDdhNjZiMDBhNTE4ODk5MjkzKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8yMjk4NWRkNTNkMzY0MDgzOTliOGMwZDlkYjM1ZjRlZSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc4NDgyMDAwMDAwMDAyNSwgLTgwLjE3MzkzOTk5OTk5OTk2XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICJibHVlIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzMTg2Y2MiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNDM5MGI3MjE1MDZmNDllNGE0Y2QzMTVkZTdiZDE5MGUpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2ViYTRiMDdjMGVhYjRjNjdiMWNhNzUxOWM2ZWYyYWFlID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9hMGQ1ZTg1NjY4ZjM0N2JhYjQyMDM0NWVkOGFiYTA3NSA9ICQoYDxkaXYgaWQ9Imh0bWxfYTBkNWU4NTY2OGYzNDdiYWI0MjAzNDVlZDhhYmEwNzUiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPldhdHNvbiBJc2xhbmQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZWJhNGIwN2MwZWFiNGM2N2IxY2E3NTE5YzZlZjJhYWUuc2V0Q29udGVudChodG1sX2EwZDVlODU2NjhmMzQ3YmFiNDIwMzQ1ZWQ4YWJhMDc1KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8yMjk4NWRkNTNkMzY0MDgzOTliOGMwZDlkYjM1ZjRlZS5iaW5kUG9wdXAocG9wdXBfZWJhNGIwN2MwZWFiNGM2N2IxY2E3NTE5YzZlZjJhYWUpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzJjOGZjZDNkNTI2NDQzMDlhZmExNjc1MWIzNGRlNGE4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzY4MTQwODk2NjEyOTUsIC04MC4zODUyMjc4MDgzODU2Nl0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8yMmY4ZDhmMzhkMWI0MTFkOWU2ZTFlY2RiNzY3NGQ4YiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZTA2NWQ0NzBiNTJjNDk4ZWI3MzQwZTY0NjBmOTJlZDAgPSAkKGA8ZGl2IGlkPSJodG1sX2UwNjVkNDcwYjUyYzQ5OGViNzM0MGU2NDYwZjkyZWQwIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXN0IEZsYWdsZXI8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMjJmOGQ4ZjM4ZDFiNDExZDllNmUxZWNkYjc2NzRkOGIuc2V0Q29udGVudChodG1sX2UwNjVkNDcwYjUyYzQ5OGViNzM0MGU2NDYwZjkyZWQwKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8yYzhmY2QzZDUyNjQ0MzA5YWZhMTY3NTFiMzRkZTRhOC5iaW5kUG9wdXAocG9wdXBfMjJmOGQ4ZjM4ZDFiNDExZDllNmUxZWNkYjc2NzRkOGIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzI2Y2MxNzZlZTdmNDRhMjBiYjVjOTQwZTkxOGIwOTQ5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjguNzg5MzkwMDAwMDAwMDI2LCAtODEuMjUyNzA5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogImJsdWUiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzMxODZjYyIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF80MzkwYjcyMTUwNmY0OWU0YTRjZDMxNWRlN2JkMTkwZSk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYzUyZmI5ZWE2YmRhNGIyN2E2ODE2ZDdmOWZlOTA0ZGEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzNkODM4YzU0YTk5OTQ1MWU4YTEyNzdjNjhkMzgwNTMxID0gJChgPGRpdiBpZD0iaHRtbF8zZDgzOGM1NGE5OTk0NTFlOGExMjc3YzY4ZDM4MDUzMSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V3lud29vZDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jNTJmYjllYTZiZGE0YjI3YTY4MTZkN2Y5ZmU5MDRkYS5zZXRDb250ZW50KGh0bWxfM2Q4MzhjNTRhOTk5NDUxZThhMTI3N2M2OGQzODA1MzEpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzI2Y2MxNzZlZTdmNDRhMjBiYjVjOTQwZTkxOGIwOTQ5LmJpbmRQb3B1cChwb3B1cF9jNTJmYjllYTZiZGE0YjI3YTY4MTZkN2Y5ZmU5MDRkYSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZmFlODc4ZDE4ZWFkNGM5NWIwOWNkMWQ3ZTVjOGY1ODUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyOC43ODkzOTAwMDAwMDAwMjYsIC04MS4yNTI3MDk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiYmx1ZSIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjMzE4NmNjIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzQzOTBiNzIxNTA2ZjQ5ZTRhNGNkMzE1ZGU3YmQxOTBlKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9iYzdmMDY3ZTUwOWE0ODViYjA4NTViZjkyY2NlZmM4ZSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMmYwMDZkYjZhYjY2NDM3MWIxYTNkODZjMjA3M2UwZTQgPSAkKGA8ZGl2IGlkPSJodG1sXzJmMDA2ZGI2YWI2NjQzNzFiMWEzZDg2YzIwNzNlMGU0IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XeW53b29kIEFydCBEaXN0cmljdDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9iYzdmMDY3ZTUwOWE0ODViYjA4NTViZjkyY2NlZmM4ZS5zZXRDb250ZW50KGh0bWxfMmYwMDZkYjZhYjY2NDM3MWIxYTNkODZjMjA3M2UwZTQpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2ZhZTg3OGQxOGVhZDRjOTViMDljZDFkN2U1YzhmNTg1LmJpbmRQb3B1cChwb3B1cF9iYzdmMDY3ZTUwOWE0ODViYjA4NTViZjkyY2NlZmM4ZSkKICAgICAgICA7CgogICAgICAgIAogICAgCjwvc2NyaXB0Pg== onload=\"this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7fc0704066d8>"
      ]
     },
     "execution_count": 218,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# create map of Miami using latitude and longitude values\n",
    "map_miami = folium.Map(location=[latitude, longitude], zoom_start=10)\n",
    "\n",
    "# add markers to map\n",
    "for lat, lng, neighborhood in zip(miamidf['Latitude'], miamidf['Longitude'], miamidf['Neighborhood']):\n",
    "    label = '{}'.format(neighborhood)\n",
    "    label = folium.Popup(label, parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lng],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color='blue',\n",
    "        fill=True,\n",
    "        fill_color='#3186cc',\n",
    "        fill_opacity=0.7,\n",
    "        parse_html=False).add_to(map_miami)  \n",
    "    \n",
    "map_miami"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Use Foursquare to find venues"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 326,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Your credentails:\n",
      "CLIENT_ID: my client id\n",
      "CLIENT_SECRET:my client secret\n"
     ]
    }
   ],
   "source": [
    "# define Foursquare Credentials and Version\n",
    "CLIENT_ID = 'my client id' # your Foursquare ID\n",
    "CLIENT_SECRET = 'my client secret' # your Foursquare Secret\n",
    "VERSION = '20180605' # Foursquare API version\n",
    "\n",
    "print('Your credentails:')\n",
    "print('CLIENT_ID: ' + CLIENT_ID)\n",
    "print('CLIENT_SECRET:' + CLIENT_SECRET)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 239,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "Allapattah\n",
      "Arts & Entertainment District\n",
      "Biscayne Boulevard Historic District\n",
      "Biscayne Island, Miami\n",
      "Brickell\n",
      "Brickell Key\n",
      "Buena Vista (Miami)\n",
      "Central Business District (Miami)\n",
      "Coconut Grove\n",
      "Coral Way\n",
      "Miami Design District\n",
      "Edgewater (Miami)\n",
      "Flagami\n",
      "Government Center (Miami)\n",
      "Grapeland Heights\n",
      "Greater Downtown Miami\n",
      "Health District (Miami)\n",
      "Liberty City (Miami)\n",
      "Little Haiti\n",
      "Little Havana\n",
      "Little River (Miami)\n",
      "Lummus Park Historic District\n",
      "Miami Ironside\n",
      "Midtown Miami\n",
      "Riverside (Miami)\n",
      "Overtown (Miami)\n",
      "Park West (Miami)\n",
      "Spring Garden (Miami)\n",
      "The Roads\n",
      "Umoja Village\n",
      "Upper Eastside\n",
      "Virginia Key\n",
      "Watson Island\n",
      "West Flagler\n",
      "Wynwood\n",
      "Wynwood Art District\n",
      "(712, 7)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>25.80215</td>\n",
       "      <td>-80.22363</td>\n",
       "      <td>Papo Llega y Pon</td>\n",
       "      <td>25.803466</td>\n",
       "      <td>-80.223886</td>\n",
       "      <td>Cuban Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>25.80215</td>\n",
       "      <td>-80.22363</td>\n",
       "      <td>Plaza Seafood Market</td>\n",
       "      <td>25.805638</td>\n",
       "      <td>-80.223992</td>\n",
       "      <td>Seafood Restaurant</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>25.80215</td>\n",
       "      <td>-80.22363</td>\n",
       "      <td>YMCA</td>\n",
       "      <td>25.799132</td>\n",
       "      <td>-80.224291</td>\n",
       "      <td>Gym / Fitness Center</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>25.77481</td>\n",
       "      <td>-80.19773</td>\n",
       "      <td>HistoryMiami</td>\n",
       "      <td>25.774827</td>\n",
       "      <td>-80.196559</td>\n",
       "      <td>Museum</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>25.77481</td>\n",
       "      <td>-80.19773</td>\n",
       "      <td>Cane Á Sucre</td>\n",
       "      <td>25.774573</td>\n",
       "      <td>-80.194696</td>\n",
       "      <td>Sandwich Place</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                    Neighborhood  Neighborhood Latitude  \\\n",
       "0                     Allapattah               25.80215   \n",
       "1                     Allapattah               25.80215   \n",
       "2                     Allapattah               25.80215   \n",
       "3  Arts & Entertainment District               25.77481   \n",
       "4  Arts & Entertainment District               25.77481   \n",
       "\n",
       "   Neighborhood Longitude                 Venue  Venue Latitude  \\\n",
       "0               -80.22363      Papo Llega y Pon       25.803466   \n",
       "1               -80.22363  Plaza Seafood Market       25.805638   \n",
       "2               -80.22363                  YMCA       25.799132   \n",
       "3               -80.19773          HistoryMiami       25.774827   \n",
       "4               -80.19773          Cane Á Sucre       25.774573   \n",
       "\n",
       "   Venue Longitude        Venue Category  \n",
       "0       -80.223886      Cuban Restaurant  \n",
       "1       -80.223992    Seafood Restaurant  \n",
       "2       -80.224291  Gym / Fitness Center  \n",
       "3       -80.196559                Museum  \n",
       "4       -80.194696        Sandwich Place  "
      ]
     },
     "execution_count": 239,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "def getNearbyVenues(names, latitudes, longitudes, radius=500):\n",
    "    \n",
    "    venues_list=[]\n",
    "    for name, lat, lng in zip(names, latitudes, longitudes):\n",
    "        print(name)\n",
    "            \n",
    "        # create the API request URL\n",
    "        url = 'https://api.foursquare.com/v2/venues/explore?&client_id={}&client_secret={}&v={}&ll={},{}&radius={}&limit={}'.format(\n",
    "            CLIENT_ID, \n",
    "            CLIENT_SECRET, \n",
    "            VERSION, \n",
    "            lat, \n",
    "            lng, \n",
    "            radius, \n",
    "            LIMIT)\n",
    "            \n",
    "        # make the GET request\n",
    "        results = requests.get(url).json()[\"response\"]['groups'][0]['items']\n",
    "        \n",
    "        # return only relevant information for each nearby venue\n",
    "        venues_list.append([(\n",
    "            name, \n",
    "            lat, \n",
    "            lng, \n",
    "            v['venue']['name'], \n",
    "            v['venue']['location']['lat'], \n",
    "            v['venue']['location']['lng'],  \n",
    "            v['venue']['categories'][0]['name']) for v in results])\n",
    "\n",
    "    nearby_venues = pd.DataFrame([item for venue_list in venues_list for item in venue_list])\n",
    "    nearby_venues.columns = ['Neighborhood', \n",
    "                  'Neighborhood Latitude', \n",
    "                  'Neighborhood Longitude', \n",
    "                  'Venue', \n",
    "                  'Venue Latitude', \n",
    "                  'Venue Longitude', \n",
    "                  'Venue Category']\n",
    "    \n",
    "    return(nearby_venues)\n",
    "\n",
    "miami_venues = getNearbyVenues(names=miamidf['Neighborhood'],\n",
    "                                   latitudes=miamidf['Latitude'],\n",
    "                                   longitudes=miamidf['Longitude']\n",
    "                                  )\n",
    "print(miami_venues.shape)\n",
    "miami_venues.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 245,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood Latitude</th>\n",
       "      <th>Neighborhood Longitude</th>\n",
       "      <th>Venue</th>\n",
       "      <th>Venue Latitude</th>\n",
       "      <th>Venue Longitude</th>\n",
       "      <th>Venue Category</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Neighborhood</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Allapattah</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Arts &amp; Entertainment District</th>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Biscayne Boulevard Historic District</th>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Biscayne Island, Miami</th>\n",
       "      <td>33</td>\n",
       "      <td>33</td>\n",
       "      <td>33</td>\n",
       "      <td>33</td>\n",
       "      <td>33</td>\n",
       "      <td>33</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brickell</th>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "      <td>53</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Brickell Key</th>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Buena Vista (Miami)</th>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "      <td>39</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Central Business District (Miami)</th>\n",
       "      <td>59</td>\n",
       "      <td>59</td>\n",
       "      <td>59</td>\n",
       "      <td>59</td>\n",
       "      <td>59</td>\n",
       "      <td>59</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Coconut Grove</th>\n",
       "      <td>28</td>\n",
       "      <td>28</td>\n",
       "      <td>28</td>\n",
       "      <td>28</td>\n",
       "      <td>28</td>\n",
       "      <td>28</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Coral Way</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Edgewater (Miami)</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Flagami</th>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Government Center (Miami)</th>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "      <td>21</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Grapeland Heights</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Greater Downtown Miami</th>\n",
       "      <td>99</td>\n",
       "      <td>99</td>\n",
       "      <td>99</td>\n",
       "      <td>99</td>\n",
       "      <td>99</td>\n",
       "      <td>99</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Health District (Miami)</th>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Liberty City (Miami)</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Little Haiti</th>\n",
       "      <td>13</td>\n",
       "      <td>13</td>\n",
       "      <td>13</td>\n",
       "      <td>13</td>\n",
       "      <td>13</td>\n",
       "      <td>13</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Little Havana</th>\n",
       "      <td>43</td>\n",
       "      <td>43</td>\n",
       "      <td>43</td>\n",
       "      <td>43</td>\n",
       "      <td>43</td>\n",
       "      <td>43</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Little River (Miami)</th>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "      <td>16</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Lummus Park Historic District</th>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miami Design District</th>\n",
       "      <td>30</td>\n",
       "      <td>30</td>\n",
       "      <td>30</td>\n",
       "      <td>30</td>\n",
       "      <td>30</td>\n",
       "      <td>30</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miami Ironside</th>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Midtown Miami</th>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "      <td>35</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Overtown (Miami)</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Park West (Miami)</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Riverside (Miami)</th>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "      <td>19</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Spring Garden (Miami)</th>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "      <td>18</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>The Roads</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Umoja Village</th>\n",
       "      <td>29</td>\n",
       "      <td>29</td>\n",
       "      <td>29</td>\n",
       "      <td>29</td>\n",
       "      <td>29</td>\n",
       "      <td>29</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Upper Eastside</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Virginia Key</th>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "      <td>17</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Watson Island</th>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "      <td>15</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>West Flagler</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                                      Neighborhood Latitude  \\\n",
       "Neighborhood                                                  \n",
       "Allapattah                                                3   \n",
       "Arts & Entertainment District                            15   \n",
       "Biscayne Boulevard Historic District                      7   \n",
       "Biscayne Island, Miami                                   33   \n",
       "Brickell                                                 53   \n",
       "Brickell Key                                             35   \n",
       "Buena Vista (Miami)                                      39   \n",
       "Central Business District (Miami)                        59   \n",
       "Coconut Grove                                            28   \n",
       "Coral Way                                                 3   \n",
       "Edgewater (Miami)                                         5   \n",
       "Flagami                                                   8   \n",
       "Government Center (Miami)                                21   \n",
       "Grapeland Heights                                         4   \n",
       "Greater Downtown Miami                                   99   \n",
       "Health District (Miami)                                  15   \n",
       "Liberty City (Miami)                                      6   \n",
       "Little Haiti                                             13   \n",
       "Little Havana                                            43   \n",
       "Little River (Miami)                                     16   \n",
       "Lummus Park Historic District                             8   \n",
       "Miami Design District                                    30   \n",
       "Miami Ironside                                           15   \n",
       "Midtown Miami                                            35   \n",
       "Overtown (Miami)                                          4   \n",
       "Park West (Miami)                                         1   \n",
       "Riverside (Miami)                                        19   \n",
       "Spring Garden (Miami)                                    18   \n",
       "The Roads                                                 6   \n",
       "Umoja Village                                            29   \n",
       "Upper Eastside                                            4   \n",
       "Virginia Key                                             17   \n",
       "Watson Island                                            15   \n",
       "West Flagler                                              6   \n",
       "\n",
       "                                      Neighborhood Longitude  Venue  \\\n",
       "Neighborhood                                                          \n",
       "Allapattah                                                 3      3   \n",
       "Arts & Entertainment District                             15     15   \n",
       "Biscayne Boulevard Historic District                       7      7   \n",
       "Biscayne Island, Miami                                    33     33   \n",
       "Brickell                                                  53     53   \n",
       "Brickell Key                                              35     35   \n",
       "Buena Vista (Miami)                                       39     39   \n",
       "Central Business District (Miami)                         59     59   \n",
       "Coconut Grove                                             28     28   \n",
       "Coral Way                                                  3      3   \n",
       "Edgewater (Miami)                                          5      5   \n",
       "Flagami                                                    8      8   \n",
       "Government Center (Miami)                                 21     21   \n",
       "Grapeland Heights                                          4      4   \n",
       "Greater Downtown Miami                                    99     99   \n",
       "Health District (Miami)                                   15     15   \n",
       "Liberty City (Miami)                                       6      6   \n",
       "Little Haiti                                              13     13   \n",
       "Little Havana                                             43     43   \n",
       "Little River (Miami)                                      16     16   \n",
       "Lummus Park Historic District                              8      8   \n",
       "Miami Design District                                     30     30   \n",
       "Miami Ironside                                            15     15   \n",
       "Midtown Miami                                             35     35   \n",
       "Overtown (Miami)                                           4      4   \n",
       "Park West (Miami)                                          1      1   \n",
       "Riverside (Miami)                                         19     19   \n",
       "Spring Garden (Miami)                                     18     18   \n",
       "The Roads                                                  6      6   \n",
       "Umoja Village                                             29     29   \n",
       "Upper Eastside                                             4      4   \n",
       "Virginia Key                                              17     17   \n",
       "Watson Island                                             15     15   \n",
       "West Flagler                                               6      6   \n",
       "\n",
       "                                      Venue Latitude  Venue Longitude  \\\n",
       "Neighborhood                                                            \n",
       "Allapattah                                         3                3   \n",
       "Arts & Entertainment District                     15               15   \n",
       "Biscayne Boulevard Historic District               7                7   \n",
       "Biscayne Island, Miami                            33               33   \n",
       "Brickell                                          53               53   \n",
       "Brickell Key                                      35               35   \n",
       "Buena Vista (Miami)                               39               39   \n",
       "Central Business District (Miami)                 59               59   \n",
       "Coconut Grove                                     28               28   \n",
       "Coral Way                                          3                3   \n",
       "Edgewater (Miami)                                  5                5   \n",
       "Flagami                                            8                8   \n",
       "Government Center (Miami)                         21               21   \n",
       "Grapeland Heights                                  4                4   \n",
       "Greater Downtown Miami                            99               99   \n",
       "Health District (Miami)                           15               15   \n",
       "Liberty City (Miami)                               6                6   \n",
       "Little Haiti                                      13               13   \n",
       "Little Havana                                     43               43   \n",
       "Little River (Miami)                              16               16   \n",
       "Lummus Park Historic District                      8                8   \n",
       "Miami Design District                             30               30   \n",
       "Miami Ironside                                    15               15   \n",
       "Midtown Miami                                     35               35   \n",
       "Overtown (Miami)                                   4                4   \n",
       "Park West (Miami)                                  1                1   \n",
       "Riverside (Miami)                                 19               19   \n",
       "Spring Garden (Miami)                             18               18   \n",
       "The Roads                                          6                6   \n",
       "Umoja Village                                     29               29   \n",
       "Upper Eastside                                     4                4   \n",
       "Virginia Key                                      17               17   \n",
       "Watson Island                                     15               15   \n",
       "West Flagler                                       6                6   \n",
       "\n",
       "                                      Venue Category  \n",
       "Neighborhood                                          \n",
       "Allapattah                                         3  \n",
       "Arts & Entertainment District                     15  \n",
       "Biscayne Boulevard Historic District               7  \n",
       "Biscayne Island, Miami                            33  \n",
       "Brickell                                          53  \n",
       "Brickell Key                                      35  \n",
       "Buena Vista (Miami)                               39  \n",
       "Central Business District (Miami)                 59  \n",
       "Coconut Grove                                     28  \n",
       "Coral Way                                          3  \n",
       "Edgewater (Miami)                                  5  \n",
       "Flagami                                            8  \n",
       "Government Center (Miami)                         21  \n",
       "Grapeland Heights                                  4  \n",
       "Greater Downtown Miami                            99  \n",
       "Health District (Miami)                           15  \n",
       "Liberty City (Miami)                               6  \n",
       "Little Haiti                                      13  \n",
       "Little Havana                                     43  \n",
       "Little River (Miami)                              16  \n",
       "Lummus Park Historic District                      8  \n",
       "Miami Design District                             30  \n",
       "Miami Ironside                                    15  \n",
       "Midtown Miami                                     35  \n",
       "Overtown (Miami)                                   4  \n",
       "Park West (Miami)                                  1  \n",
       "Riverside (Miami)                                 19  \n",
       "Spring Garden (Miami)                             18  \n",
       "The Roads                                          6  \n",
       "Umoja Village                                     29  \n",
       "Upper Eastside                                     4  \n",
       "Virginia Key                                      17  \n",
       "Watson Island                                     15  \n",
       "West Flagler                                       6  "
      ]
     },
     "execution_count": 245,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#count how many venues in each neighborhood\n",
    "miami_venues.groupby('Neighborhood').count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 274,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "There are 168 uniques categories.\n"
     ]
    },
    {
     "data": {
      "text/plain": [
       "True"
      ]
     },
     "execution_count": 274,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Unique venues\n",
    "print('There are {} uniques categories.'.format(len(miami_venues['Venue Category'].unique())))\n",
    "# print out the list of categories\n",
    "miami_venues['Venue Category'].unique()[:50]"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Analyze each neighborhood"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 247,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Zoo</th>\n",
       "      <th>Accessories Store</th>\n",
       "      <th>African Restaurant</th>\n",
       "      <th>Airport</th>\n",
       "      <th>Airport Food Court</th>\n",
       "      <th>Airport Lounge</th>\n",
       "      <th>Airport Service</th>\n",
       "      <th>American Restaurant</th>\n",
       "      <th>Arcade</th>\n",
       "      <th>Arepa Restaurant</th>\n",
       "      <th>...</th>\n",
       "      <th>Tex-Mex Restaurant</th>\n",
       "      <th>Thai Restaurant</th>\n",
       "      <th>Theater</th>\n",
       "      <th>Trail</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Wine Bar</th>\n",
       "      <th>Wine Shop</th>\n",
       "      <th>Wings Joint</th>\n",
       "      <th>Women's Store</th>\n",
       "      <th>Yoga Studio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>...</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 168 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   Zoo  Accessories Store  African Restaurant  Airport  Airport Food Court  \\\n",
       "0    0                  0                   0        0                   0   \n",
       "1    0                  0                   0        0                   0   \n",
       "2    0                  0                   0        0                   0   \n",
       "3    0                  0                   0        0                   0   \n",
       "4    0                  0                   0        0                   0   \n",
       "\n",
       "   Airport Lounge  Airport Service  American Restaurant  Arcade  \\\n",
       "0               0                0                    0       0   \n",
       "1               0                0                    0       0   \n",
       "2               0                0                    0       0   \n",
       "3               0                0                    0       0   \n",
       "4               0                0                    0       0   \n",
       "\n",
       "   Arepa Restaurant  ...  Tex-Mex Restaurant  Thai Restaurant  Theater  Trail  \\\n",
       "0                 0  ...                   0                0        0      0   \n",
       "1                 0  ...                   0                0        0      0   \n",
       "2                 0  ...                   0                0        0      0   \n",
       "3                 0  ...                   0                0        0      0   \n",
       "4                 0  ...                   0                0        0      0   \n",
       "\n",
       "   Train Station  Wine Bar  Wine Shop  Wings Joint  Women's Store  Yoga Studio  \n",
       "0              0         0          0            0              0            0  \n",
       "1              0         0          0            0              0            0  \n",
       "2              0         0          0            0              0            0  \n",
       "3              0         0          0            0              0            0  \n",
       "4              0         0          0            0              0            0  \n",
       "\n",
       "[5 rows x 168 columns]"
      ]
     },
     "execution_count": 247,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# one hot encoding\n",
    "miami_onehot = pd.get_dummies(miami_venues[['Venue Category']], prefix=\"\", prefix_sep=\"\")\n",
    "\n",
    "# add neighborhood column back to dataframe\n",
    "miami_onehot['Neighborhood'] = miami_venues['Neighborhood'] \n",
    "\n",
    "# move neighborhood column to the first column\n",
    "fixed_columns = [miami_onehot.columns[-1]] + list(miami_onehot.columns[:-1])\n",
    "miami_onehot = miami_onehot[fixed_columns]\n",
    "\n",
    "miami_onehot.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 259,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Zoo</th>\n",
       "      <th>Accessories Store</th>\n",
       "      <th>African Restaurant</th>\n",
       "      <th>Airport</th>\n",
       "      <th>Airport Food Court</th>\n",
       "      <th>Airport Lounge</th>\n",
       "      <th>Airport Service</th>\n",
       "      <th>American Restaurant</th>\n",
       "      <th>Arcade</th>\n",
       "      <th>...</th>\n",
       "      <th>Tex-Mex Restaurant</th>\n",
       "      <th>Thai Restaurant</th>\n",
       "      <th>Theater</th>\n",
       "      <th>Trail</th>\n",
       "      <th>Train Station</th>\n",
       "      <th>Wine Bar</th>\n",
       "      <th>Wine Shop</th>\n",
       "      <th>Wings Joint</th>\n",
       "      <th>Women's Store</th>\n",
       "      <th>Yoga Studio</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.030303</td>\n",
       "      <td>0.060606</td>\n",
       "      <td>...</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.030303</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Brickell</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.018868</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>...</td>\n",
       "      <td>0.018868</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0.037736</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>5 rows × 168 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "                           Neighborhood  Zoo  Accessories Store  \\\n",
       "0                            Allapattah  0.0                0.0   \n",
       "1         Arts & Entertainment District  0.0                0.0   \n",
       "2  Biscayne Boulevard Historic District  0.0                0.0   \n",
       "3                Biscayne Island, Miami  0.0                0.0   \n",
       "4                              Brickell  0.0                0.0   \n",
       "\n",
       "   African Restaurant  Airport  Airport Food Court  Airport Lounge  \\\n",
       "0                 0.0      0.0                 0.0             0.0   \n",
       "1                 0.0      0.0                 0.0             0.0   \n",
       "2                 0.0      0.0                 0.0             0.0   \n",
       "3                 0.0      0.0                 0.0             0.0   \n",
       "4                 0.0      0.0                 0.0             0.0   \n",
       "\n",
       "   Airport Service  American Restaurant    Arcade  ...  Tex-Mex Restaurant  \\\n",
       "0              0.0             0.000000  0.000000  ...            0.000000   \n",
       "1              0.0             0.000000  0.000000  ...            0.000000   \n",
       "2              0.0             0.000000  0.000000  ...            0.000000   \n",
       "3              0.0             0.030303  0.060606  ...            0.000000   \n",
       "4              0.0             0.018868  0.000000  ...            0.018868   \n",
       "\n",
       "   Thai Restaurant  Theater  Trail  Train Station  Wine Bar  Wine Shop  \\\n",
       "0              0.0      0.0    0.0            0.0  0.000000        0.0   \n",
       "1              0.0      0.0    0.0            0.0  0.066667        0.0   \n",
       "2              0.0      0.0    0.0            0.0  0.000000        0.0   \n",
       "3              0.0      0.0    0.0            0.0  0.000000        0.0   \n",
       "4              0.0      0.0    0.0            0.0  0.000000        0.0   \n",
       "\n",
       "   Wings Joint  Women's Store  Yoga Studio  \n",
       "0          0.0       0.000000     0.000000  \n",
       "1          0.0       0.000000     0.000000  \n",
       "2          0.0       0.000000     0.000000  \n",
       "3          0.0       0.030303     0.000000  \n",
       "4          0.0       0.000000     0.037736  \n",
       "\n",
       "[5 rows x 168 columns]"
      ]
     },
     "execution_count": 259,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "miami_grouped = miami_onehot.groupby('Neighborhood').mean().reset_index()\n",
    "miami_grouped.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 317,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>0.066667</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>0.000000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Brickell</td>\n",
       "      <td>0.094340</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           Neighborhood     Hotel\n",
       "0                            Allapattah  0.000000\n",
       "1         Arts & Entertainment District  0.066667\n",
       "2  Biscayne Boulevard Historic District  0.000000\n",
       "3                Biscayne Island, Miami  0.000000\n",
       "4                              Brickell  0.094340"
      ]
     },
     "execution_count": 317,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "len(miami_grouped[miami_grouped[\"Hotel\"] > 0])\n",
    "\n",
    "miami_hotel = miami_grouped[[\"Neighborhood\", \"Hotel\"]]\n",
    "miami_hotel.head()\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 318,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "      <th>Cluster Labels</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>1</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Brickell</td>\n",
       "      <td>0.094340</td>\n",
       "      <td>2</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           Neighborhood     Hotel  Cluster Labels\n",
       "0                            Allapattah  0.000000               0\n",
       "1         Arts & Entertainment District  0.066667               1\n",
       "2  Biscayne Boulevard Historic District  0.000000               0\n",
       "3                Biscayne Island, Miami  0.000000               0\n",
       "4                              Brickell  0.094340               2"
      ]
     },
     "execution_count": 318,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Cluster the neighborhoods\n",
    "# set number of clusters\n",
    "kclusters = 3\n",
    "\n",
    "miami_grouped_clustering = miami_hotel.drop('Neighborhood', 1)\n",
    "\n",
    "# run k-means clustering\n",
    "kmeans = KMeans(n_clusters=kclusters, random_state=0).fit(miami_grouped_clustering)\n",
    "\n",
    "# check cluster labels generated for each row in the dataframe\n",
    "kmeans.labels_[0:10] \n",
    "\n",
    "miami_merged = miami_hotel.copy()\n",
    "\n",
    "miami_merged[\"Cluster Labels\"]= kmeans.labels_\n",
    "# merge toronto_grouped with toronto_data to add latitude/longitude for each neighborhood\n",
    "\n",
    "miami_merged.head() # check the last columns!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 319,
   "metadata": {},
   "outputs": [
    {
     "name": "stdout",
     "output_type": "stream",
     "text": [
      "(34, 6)\n"
     ]
    },
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>index</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>25.802150</td>\n",
       "      <td>-80.223630</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>1</td>\n",
       "      <td>4</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "      <td>5</td>\n",
       "      <td>25.878823</td>\n",
       "      <td>-80.167661</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>0.000000</td>\n",
       "      <td>0</td>\n",
       "      <td>6</td>\n",
       "      <td>25.815824</td>\n",
       "      <td>-80.188542</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Brickell</td>\n",
       "      <td>0.094340</td>\n",
       "      <td>2</td>\n",
       "      <td>7</td>\n",
       "      <td>25.764287</td>\n",
       "      <td>-80.192557</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                           Neighborhood     Hotel  Cluster Labels  index  \\\n",
       "0                            Allapattah  0.000000               0      3   \n",
       "1         Arts & Entertainment District  0.066667               1      4   \n",
       "2  Biscayne Boulevard Historic District  0.000000               0      5   \n",
       "3                Biscayne Island, Miami  0.000000               0      6   \n",
       "4                              Brickell  0.094340               2      7   \n",
       "\n",
       "    Latitude  Longitude  \n",
       "0  25.802150 -80.223630  \n",
       "1  25.774810 -80.197730  \n",
       "2  25.878823 -80.167661  \n",
       "3  25.815824 -80.188542  \n",
       "4  25.764287 -80.192557  "
      ]
     },
     "execution_count": 319,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "# merge miami_grouped with miamidf to add latitude/longitude for each neighborhood\n",
    "miami_merged = miami_merged.join(miamidf.set_index(\"Neighborhood\"), on=\"Neighborhood\")\n",
    "\n",
    "print(miami_merged.shape)\n",
    "miami_merged.head() # check the last columns!"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 320,
   "metadata": {
    "scrolled": true
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><iframe src=\"about:blank\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" data-html=PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjAiID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwIiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFsyNS43NzQyNjU4LCAtODAuMTkzNjU4OV0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMSwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2QxNDQ2MzliZGI3NjRlZjg4MDMwZTI5M2Y5OTc0Njk2ID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly97c30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmciLAogICAgICAgICAgICAgICAgeyJhdHRyaWJ1dGlvbiI6ICJEYXRhIGJ5IFx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9vcGVuc3RyZWV0bWFwLm9yZ1wiXHUwMDNlT3BlblN0cmVldE1hcFx1MDAzYy9hXHUwMDNlLCB1bmRlciBcdTAwM2NhIGhyZWY9XCJodHRwOi8vd3d3Lm9wZW5zdHJlZXRtYXAub3JnL2NvcHlyaWdodFwiXHUwMDNlT0RiTFx1MDAzYy9hXHUwMDNlLiIsICJkZXRlY3RSZXRpbmEiOiBmYWxzZSwgIm1heE5hdGl2ZVpvb20iOiAxOCwgIm1heFpvb20iOiAxOCwgIm1pblpvb20iOiAwLCAibm9XcmFwIjogZmFsc2UsICJvcGFjaXR5IjogMSwgInN1YmRvbWFpbnMiOiAiYWJjIiwgInRtcyI6IGZhbHNlfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZjgyMDAwMjdmNTEwNGUyZTllMzcyOTRlYWNhZDM5ZWYgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS44MDIxNTAwMDAwMDAwNCwgLTgwLjIyMzYyOTk5OTk5OTk2XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzkwNTEyYmNkOTdlNTQyOGM5Y2JkZWZlMDFhYmMzOGUyID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9iMjkyNjU3NTlkNDM0OWQ4YThjODFiOTIwZTNlNjA4MCA9ICQoYDxkaXYgaWQ9Imh0bWxfYjI5MjY1NzU5ZDQzNDlkOGE4YzgxYjkyMGUzZTYwODAiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkFsbGFwYXR0YWggQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzkwNTEyYmNkOTdlNTQyOGM5Y2JkZWZlMDFhYmMzOGUyLnNldENvbnRlbnQoaHRtbF9iMjkyNjU3NTlkNDM0OWQ4YThjODFiOTIwZTNlNjA4MCk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZjgyMDAwMjdmNTEwNGUyZTllMzcyOTRlYWNhZDM5ZWYuYmluZFBvcHVwKHBvcHVwXzkwNTEyYmNkOTdlNTQyOGM5Y2JkZWZlMDFhYmMzOGUyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl82MWM0YzcwYTE3MjU0YWU3YmQ3NWFhZWQ5ZmJjMzVkYyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc3NDgxMDAwMDAwMDA2LCAtODAuMTk3NzI5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MDAwZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfY2UzNmQ5Y2MzMjEzNGI5N2I3NmJmNDA2N2MyMmYxYjIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2JkNjk0ZjRkMGYyYTQwOTViNWUwMDkwNjM2MGRkNWJkID0gJChgPGRpdiBpZD0iaHRtbF9iZDY5NGY0ZDBmMmE0MDk1YjVlMDA5MDYzNjBkZDViZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QXJ0cyAmYW1wOyBFbnRlcnRhaW5tZW50IERpc3RyaWN0IENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9jZTM2ZDljYzMyMTM0Yjk3Yjc2YmY0MDY3YzIyZjFiMi5zZXRDb250ZW50KGh0bWxfYmQ2OTRmNGQwZjJhNDA5NWI1ZTAwOTA2MzYwZGQ1YmQpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyXzYxYzRjNzBhMTcyNTRhZTdiZDc1YWFlZDlmYmMzNWRjLmJpbmRQb3B1cChwb3B1cF9jZTM2ZDljYzMyMTM0Yjk3Yjc2YmY0MDY3YzIyZjFiMikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfZDIxYzcxOGE1OGY3NDdkNjg5ZDIzY2YzODViYzIwOTUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS44Nzg4MjMyMjI2MjE5ODUsIC04MC4xNjc2NjE0MDMyMDc4M10sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9jZWEyNDMwMTc0ZmI0ZTdmYjBjNzBjNDkyZWJiMzZhMSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZWM4MzZjNzI5ZGEwNDk3NDgyYTY1N2U5NmVhOTU0Y2UgPSAkKGA8ZGl2IGlkPSJodG1sX2VjODM2YzcyOWRhMDQ5NzQ4MmE2NTdlOTZlYTk1NGNlIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5CaXNjYXluZSBCb3VsZXZhcmQgSGlzdG9yaWMgRGlzdHJpY3QgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2NlYTI0MzAxNzRmYjRlN2ZiMGM3MGM0OTJlYmIzNmExLnNldENvbnRlbnQoaHRtbF9lYzgzNmM3MjlkYTA0OTc0ODJhNjU3ZTk2ZWE5NTRjZSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZDIxYzcxOGE1OGY3NDdkNjg5ZDIzY2YzODViYzIwOTUuYmluZFBvcHVwKHBvcHVwX2NlYTI0MzAxNzRmYjRlN2ZiMGM3MGM0OTJlYmIzNmExKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81Nzc2Nzk3NWIzZDQ0NDY1YWYxNmFjOWI5N2E1OWE3MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjgxNTgyMzU1NDI0MzU5MywgLTgwLjE4ODU0MTkzMDEyNjA5XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwX2U1N2U1YmQwMzJjMzRiMzNiMzYyNmZjMjI5Mjc4ZjJkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF80YjNkOTk0NzBiODA0YjFmODkyNDQyYWEyNzg0ZGIzYiA9ICQoYDxkaXYgaWQ9Imh0bWxfNGIzZDk5NDcwYjgwNGIxZjg5MjQ0MmFhMjc4NGRiM2IiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJpc2NheW5lIElzbGFuZCwgTWlhbWkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2U1N2U1YmQwMzJjMzRiMzNiMzYyNmZjMjI5Mjc4ZjJkLnNldENvbnRlbnQoaHRtbF80YjNkOTk0NzBiODA0YjFmODkyNDQyYWEyNzg0ZGIzYik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfNTc3Njc5NzViM2Q0NDQ2NWFmMTZhYzliOTdhNTlhNzMuYmluZFBvcHVwKHBvcHVwX2U1N2U1YmQwMzJjMzRiMzNiMzYyNmZjMjI5Mjc4ZjJkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lODRlOWVmNTdmMGY0OWIzYmYzODFhMmY2Mjg3ZmY5ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc2NDI4NjkxMDg5Mjc2LCAtODAuMTkyNTU3NDk1MjAzNzJdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MGZmYjQiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwZmZiNCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMjQyYWQ4Njc2NWJmNDZkYTk3ZjUyNjdkNzZlOGM0YjggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2U5MGRmOWYzMWJkZTRhNzY5MjQ1YzM4MmI0MzFiMGRlID0gJChgPGRpdiBpZD0iaHRtbF9lOTBkZjlmMzFiZGU0YTc2OTI0NWMzODJiNDMxYjBkZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+QnJpY2tlbGwgQ2x1c3RlciAyPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzI0MmFkODY3NjViZjQ2ZGE5N2Y1MjY3ZDc2ZThjNGI4LnNldENvbnRlbnQoaHRtbF9lOTBkZjlmMzFiZGU0YTc2OTI0NWMzODJiNDMxYjBkZSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZTg0ZTllZjU3ZjBmNDliM2JmMzgxYTJmNjI4N2ZmOWQuYmluZFBvcHVwKHBvcHVwXzI0MmFkODY3NjViZjQ2ZGE5N2Y1MjY3ZDc2ZThjNGI4KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl8xMDZmMWEyMGIwZDM0MTQyYThiYTE5YTJkODk4ODM0MyA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc2NTc3NTAwNjI3MzI4NywgLTgwLjE4NjA5NDg1NTM5NTk4XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjODAwMGZmIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzdmNjVlMmY2OWU5NDQ2MWZiZjcxOWNkNGE3MTljYmNlID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9iNDVhNjU0MzAwYTY0MjEyODQyNDUxYTNjMjkxNmVkYSA9ICQoYDxkaXYgaWQ9Imh0bWxfYjQ1YTY1NDMwMGE2NDIxMjg0MjQ1MWEzYzI5MTZlZGEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJyaWNrZWxsIEtleSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfN2Y2NWUyZjY5ZTk0NDYxZmJmNzE5Y2Q0YTcxOWNiY2Uuc2V0Q29udGVudChodG1sX2I0NWE2NTQzMDBhNjQyMTI4NDI0NTFhM2MyOTE2ZWRhKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8xMDZmMWEyMGIwZDM0MTQyYThiYTE5YTJkODk4ODM0My5iaW5kUG9wdXAocG9wdXBfN2Y2NWUyZjY5ZTk0NDYxZmJmNzE5Y2Q0YTcxOWNiY2UpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzgxYjQ1MjIzNWJlYzQzYTQ5NGM5NGI3NTA4NTljNDkxID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODEwNTIyMTkzNTk2OTIsIC04MC4xOTMxMzI4MjEwOTIzXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzNlYzBlZDJhZTI1NzQ3MDQ4NWE2MWE2Yzc5OTM5Yzc2ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81N2Q2YjI3Nzg5ODc0OTcyOTcwZWI0NTk2NzQ4NmQxYSA9ICQoYDxkaXYgaWQ9Imh0bWxfNTdkNmIyNzc4OTg3NDk3Mjk3MGViNDU5Njc0ODZkMWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkJ1ZW5hIFZpc3RhIChNaWFtaSkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzNlYzBlZDJhZTI1NzQ3MDQ4NWE2MWE2Yzc5OTM5Yzc2LnNldENvbnRlbnQoaHRtbF81N2Q2YjI3Nzg5ODc0OTcyOTcwZWI0NTk2NzQ4NmQxYSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfODFiNDUyMjM1YmVjNDNhNDk0Yzk0Yjc1MDg1OWM0OTEuYmluZFBvcHVwKHBvcHVwXzNlYzBlZDJhZTI1NzQ3MDQ4NWE2MWE2Yzc5OTM5Yzc2KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NzVlNDVlOWIwY2Y0ZjYzYjc0ZjA2Yzc0MTQ1NDhjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc5NjgwOTU4MjExNDkyNSwgLTgwLjI3MzU5NTk1OTg3NzU1XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzNhMjU3NjU3OWUxNjQ5ZGNhNTZkYTNmNDNmZjA5MTc5ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF84NjY2MDZjOWRlODU0MzBjYWRmYzRhMzM3ZDdjNDU2YiA9ICQoYDxkaXYgaWQ9Imh0bWxfODY2NjA2YzlkZTg1NDMwY2FkZmM0YTMzN2Q3YzQ1NmIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkNlbnRyYWwgQnVzaW5lc3MgRGlzdHJpY3QgKE1pYW1pKSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfM2EyNTc2NTc5ZTE2NDlkY2E1NmRhM2Y0M2ZmMDkxNzkuc2V0Q29udGVudChodG1sXzg2NjYwNmM5ZGU4NTQzMGNhZGZjNGEzMzdkN2M0NTZiKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl84NzVlNDVlOWIwY2Y0ZjYzYjc0ZjA2Yzc0MTQ1NDhjMC5iaW5kUG9wdXAocG9wdXBfM2EyNTc2NTc5ZTE2NDlkY2E1NmRhM2Y0M2ZmMDkxNzkpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzhkOGZhYzJmYWMwZjQ0ZjBhNjZiYjE3ODM4MTEyMTc2ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzMyMzMwMDAwMDAwMDQ3LCAtODAuMjU0MTM5OTk5OTk5OTVdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MDAwZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfZjMyZjVkMjY2ZDc2NDIyMTg3ZWI1OGFhYzI3YWUxZDggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzM1NjA1MzhiZjNiYTQ3MzI5NGFjZTA0ZThhZWM1M2ZmID0gJChgPGRpdiBpZD0iaHRtbF8zNTYwNTM4YmYzYmE0NzMyOTRhY2UwNGU4YWVjNTNmZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q29jb251dCBHcm92ZSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfZjMyZjVkMjY2ZDc2NDIyMTg3ZWI1OGFhYzI3YWUxZDguc2V0Q29udGVudChodG1sXzM1NjA1MzhiZjNiYTQ3MzI5NGFjZTA0ZThhZWM1M2ZmKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl84ZDhmYWMyZmFjMGY0NGYwYTY2YmIxNzgzODExMjE3Ni5iaW5kUG9wdXAocG9wdXBfZjMyZjVkMjY2ZDc2NDIyMTg3ZWI1OGFhYzI3YWUxZDgpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2YwMzJlOGY5ODZkMTRlYmRhMTE4OTFlYzk0NmFjMGNmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzU1MzMwMDAwMDAwMDcyLCAtODAuMjIyMTc5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNWU0MGU2YjAzNjIzNGJkODk2YjM0YjM5Y2JlZWRhZGIgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2Q0M2VmMDFkM2ZiNzQ2NTBiMTkwYjU4ZGQxZTg1YmEwID0gJChgPGRpdiBpZD0iaHRtbF9kNDNlZjAxZDNmYjc0NjUwYjE5MGI1OGRkMWU4NWJhMCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Q29yYWwgV2F5IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF81ZTQwZTZiMDM2MjM0YmQ4OTZiMzRiMzljYmVlZGFkYi5zZXRDb250ZW50KGh0bWxfZDQzZWYwMWQzZmI3NDY1MGIxOTBiNThkZDFlODViYTApOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2YwMzJlOGY5ODZkMTRlYmRhMTE4OTFlYzk0NmFjMGNmLmJpbmRQb3B1cChwb3B1cF81ZTQwZTZiMDM2MjM0YmQ4OTZiMzRiMzljYmVlZGFkYikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfODg2Nzc0OGM1NzEzNGRkNDliOTNhOGI3MDNmM2IzNDUgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43MDcwNzU4MTcwNTA0ODQsIC04MC4yNTk2MTc4NjI3ODc4NV0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF82OGMwNWZkMmFkN2I0NDE3YTBhNDMwZjBhOTdmYTE2MiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfMGM3NjlmY2E1OTk2NDU2NmE0YjQxNTkzYjNiYjg5NzEgPSAkKGA8ZGl2IGlkPSJodG1sXzBjNzY5ZmNhNTk5NjQ1NjZhNGI0MTU5M2IzYmI4OTcxIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5FZGdld2F0ZXIgKE1pYW1pKSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNjhjMDVmZDJhZDdiNDQxN2EwYTQzMGYwYTk3ZmExNjIuc2V0Q29udGVudChodG1sXzBjNzY5ZmNhNTk5NjQ1NjZhNGI0MTU5M2IzYmI4OTcxKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl84ODY3NzQ4YzU3MTM0ZGQ0OWI5M2E4YjcwM2YzYjM0NS5iaW5kUG9wdXAocG9wdXBfNjhjMDVmZDJhZDdiNDQxN2EwYTQzMGYwYTk3ZmExNjIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2QxMDRmYjM1NGFlMTRmYmNhOGRkZDBjNGY1MmUwNDI1ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzYyNzEwMDAwMDAwMDI3LCAtODAuMzE1ODY5OTk5OTk5OTZdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYmI1NTk4ZDdmZGRlNGE1ZTgyOTMwNzM3YjgzZjg1N2YgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzY1Y2I1YmJmZmZjNDQ1N2RiYmQyNDlhM2FiNTc1YTk1ID0gJChgPGRpdiBpZD0iaHRtbF82NWNiNWJiZmZmYzQ0NTdkYmJkMjQ5YTNhYjU3NWE5NSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+RmxhZ2FtaSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfYmI1NTk4ZDdmZGRlNGE1ZTgyOTMwNzM3YjgzZjg1N2Yuc2V0Q29udGVudChodG1sXzY1Y2I1YmJmZmZjNDQ1N2RiYmQyNDlhM2FiNTc1YTk1KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9kMTA0ZmIzNTRhZTE0ZmJjYThkZGQwYzRmNTJlMDQyNS5iaW5kUG9wdXAocG9wdXBfYmI1NTk4ZDdmZGRlNGE1ZTgyOTMwNzM3YjgzZjg1N2YpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y1MTYzZGM5ZDcxNTRlNjJhZTQ1Y2NlODAyMjk5YmY4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzc1MDUwMDAwMDAwMDgsIC04MC4xOTU2NTk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiIzgwMDBmZiIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9iZDJlYWRjOWZkZTU0ZGY3OGYwN2M0M2IwOTQ5ZWQ3MiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYzBmY2VmM2Q1YWUxNDgzYjk2ZDRhNTU1ZTI1NTI0OTYgPSAkKGA8ZGl2IGlkPSJodG1sX2MwZmNlZjNkNWFlMTQ4M2I5NmQ0YTU1NWUyNTUyNDk2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5Hb3Zlcm5tZW50IENlbnRlciAoTWlhbWkpIENsdXN0ZXIgMTwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF9iZDJlYWRjOWZkZTU0ZGY3OGYwN2M0M2IwOTQ5ZWQ3Mi5zZXRDb250ZW50KGh0bWxfYzBmY2VmM2Q1YWUxNDgzYjk2ZDRhNTU1ZTI1NTI0OTYpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2Y1MTYzZGM5ZDcxNTRlNjJhZTQ1Y2NlODAyMjk5YmY4LmJpbmRQb3B1cChwb3B1cF9iZDJlYWRjOWZkZTU0ZGY3OGYwN2M0M2IwOTQ5ZWQ3MikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTI2NGI5Mzg5M2MxNDk5MGEzNWE0ZWJkM2M1NzIzOTEgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS43ODgxOTAwMDAwMDAwNDMsIC04MC4yNTYxMDk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8zZTkwNzMxNDY4ODU0Y2NhYWUyN2ZmZDZiZWQzOTNmMiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfZjc1ZmZiOWIzMGI1NDRjODk4ZWI3NGU1ZmMyZTgzNDggPSAkKGA8ZGl2IGlkPSJodG1sX2Y3NWZmYjliMzBiNTQ0Yzg5OGViNzRlNWZjMmU4MzQ4IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5HcmFwZWxhbmQgSGVpZ2h0cyBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfM2U5MDczMTQ2ODg1NGNjYWFlMjdmZmQ2YmVkMzkzZjIuc2V0Q29udGVudChodG1sX2Y3NWZmYjliMzBiNTQ0Yzg5OGViNzRlNWZjMmU4MzQ4KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9hMjY0YjkzODkzYzE0OTkwYTM1YTRlYmQzYzU3MjM5MS5iaW5kUG9wdXAocG9wdXBfM2U5MDczMTQ2ODg1NGNjYWFlMjdmZmQ2YmVkMzkzZjIpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZjNDA3ZTBmM2ZiNjQwNzdhOTA5Y2Y4ODdiNTBkMjY5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzY5MTMwMDAwMDAwMDc1LCAtODAuMTg5OTc5OTk5OTk5OTNdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MDAwZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMmEyZjRhZGY2ZWY1NDQ2YmE2MGNmMDkwZDBiNTM1NDAgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2U4MGJlYTBiMmJjODRlYzI4ZjJjZmFjODZkNjUzMWFmID0gJChgPGRpdiBpZD0iaHRtbF9lODBiZWEwYjJiYzg0ZWMyOGYyY2ZhYzg2ZDY1MzFhZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+R3JlYXRlciBEb3dudG93biBNaWFtaSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMmEyZjRhZGY2ZWY1NDQ2YmE2MGNmMDkwZDBiNTM1NDAuc2V0Q29udGVudChodG1sX2U4MGJlYTBiMmJjODRlYzI4ZjJjZmFjODZkNjUzMWFmKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9mYzQwN2UwZjNmYjY0MDc3YTkwOWNmODg3YjUwZDI2OS5iaW5kUG9wdXAocG9wdXBfMmEyZjRhZGY2ZWY1NDQ2YmE2MGNmMDkwZDBiNTM1NDApCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzU4YWRjYzRlMzBlMTQ2N2VhYTQ2MGE5ODkxMzNkNGI4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzc0ODEwMDAwMDAwMDYsIC04MC4xOTc3Mjk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiIzgwMDBmZiIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjODAwMGZmIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF9iNTM0ZjE3NjM5OTQ0MmZjYjAzMTg5NzRlODUzODRmZSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfOWNkZDQ3OWMyNmRjNDA3OTlhNGEzOGY3NzU2Nzg3ZDcgPSAkKGA8ZGl2IGlkPSJodG1sXzljZGQ0NzljMjZkYzQwNzk5YTRhMzhmNzc1Njc4N2Q3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5IZWFsdGggRGlzdHJpY3QgKE1pYW1pKSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfYjUzNGYxNzYzOTk0NDJmY2IwMzE4OTc0ZTg1Mzg0ZmUuc2V0Q29udGVudChodG1sXzljZGQ0NzljMjZkYzQwNzk5YTRhMzhmNzc1Njc4N2Q3KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl81OGFkY2M0ZTMwZTE0NjdlYWE0NjBhOTg5MTMzZDRiOC5iaW5kUG9wdXAocG9wdXBfYjUzNGYxNzYzOTk0NDJmY2IwMzE4OTc0ZTg1Mzg0ZmUpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Y0NjEwYjFhMjVlMjQ0NDg4ZWFkODA3MmE3ZTczYzc5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuOTEwODcwMDAwMDAwMDQ1LCAtODAuMjAwMDY5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMWMyZTZiNGRkMTE2NGMwNThhODg2YTQzNGQ4MTNiMGQgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2RkYWRjMzBmOGUwMzQxMWU5NzQ4MjY4ZmQ4ODQyOGM3ID0gJChgPGRpdiBpZD0iaHRtbF9kZGFkYzMwZjhlMDM0MTFlOTc0ODI2OGZkODg0MjhjNyIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGliZXJ0eSBDaXR5IChNaWFtaSkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzFjMmU2YjRkZDExNjRjMDU4YTg4NmE0MzRkODEzYjBkLnNldENvbnRlbnQoaHRtbF9kZGFkYzMwZjhlMDM0MTFlOTc0ODI2OGZkODg0MjhjNyk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZjQ2MTBiMWEyNWUyNDQ0ODhlYWQ4MDcyYTdlNzNjNzkuYmluZFBvcHVwKHBvcHVwXzFjMmU2YjRkZDExNjRjMDU4YTg4NmE0MzRkODEzYjBkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81MThlODljM2Y4M2U0MTVjODllMTcwYmU0NmY4YTM5ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjgyODY0MDAwMDAwMDA2NCwgLTgwLjE5ODMyOTk5OTk5OTk0XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzE0MTYwODZjYzAzMzRhYmM5NDRlNTMyYjJhOTI3MTg0ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8xY2E0MDYxNTFhMTA0NTQwODQwM2IzNjE1ZjNkNGEzZCA9ICQoYDxkaXYgaWQ9Imh0bWxfMWNhNDA2MTUxYTEwNDU0MDg0MDNiMzYxNWYzZDRhM2QiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkxpdHRsZSBIYWl0aSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMTQxNjA4NmNjMDMzNGFiYzk0NGU1MzJiMmE5MjcxODQuc2V0Q29udGVudChodG1sXzFjYTQwNjE1MWExMDQ1NDA4NDAzYjM2MTVmM2Q0YTNkKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl81MThlODljM2Y4M2U0MTVjODllMTcwYmU0NmY4YTM5ZC5iaW5kUG9wdXAocG9wdXBfMTQxNjA4NmNjMDMzNGFiYzk0NGU1MzJiMmE5MjcxODQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzVhM2YyMmNkMjlkNTRkMzg5ZWNhMjg1NGFkYTBmODI0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODkzNzc5OTg4ODkxNTU2LCAtODAuMTYyMzE5OTQ0NDU3NDRdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNjQ4ZDk3YzdmZGYzNGI5YTk5MjgwNjc0YzcwZjRkOTkgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzlkOWUzM2ZhNjRjMzRiOWViYzQyNTM0Njc1MzlmZTlkID0gJChgPGRpdiBpZD0iaHRtbF85ZDllMzNmYTY0YzM0YjllYmM0MjUzNDY3NTM5ZmU5ZCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIEhhdmFuYSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNjQ4ZDk3YzdmZGYzNGI5YTk5MjgwNjc0YzcwZjRkOTkuc2V0Q29udGVudChodG1sXzlkOWUzM2ZhNjRjMzRiOWViYzQyNTM0Njc1MzlmZTlkKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl81YTNmMjJjZDI5ZDU0ZDM4OWVjYTI4NTRhZGEwZjgyNC5iaW5kUG9wdXAocG9wdXBfNjQ4ZDk3YzdmZGYzNGI5YTk5MjgwNjc0YzcwZjRkOTkpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzljNTIyZThjODc2OTQ0NTRiNjlmYjZmMDExYWZlN2RmID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODQ2MDAyNDI0MjUxOTA3LCAtODAuMTc1MDYzNDM1MTk1MzhdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MDAwZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNWUxZjUwOGQ1MDNkNGI5YTkzZGQwZmFlZjU2ZmViYzkgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2UwNGNmMWQwOWZhMjRhYzc5NzA2ZDc4ZDc2OWQyNWQ2ID0gJChgPGRpdiBpZD0iaHRtbF9lMDRjZjFkMDlmYTI0YWM3OTcwNmQ3OGQ3NjlkMjVkNiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TGl0dGxlIFJpdmVyIChNaWFtaSkgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzVlMWY1MDhkNTAzZDRiOWE5M2RkMGZhZWY1NmZlYmM5LnNldENvbnRlbnQoaHRtbF9lMDRjZjFkMDlmYTI0YWM3OTcwNmQ3OGQ3NjlkMjVkNik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfOWM1MjJlOGM4NzY5NDQ1NGI2OWZiNmYwMTFhZmU3ZGYuYmluZFBvcHVwKHBvcHVwXzVlMWY1MDhkNTAzZDRiOWE5M2RkMGZhZWY1NmZlYmM5KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9hMzI4Mzc0ODgwY2I0MDEzYTE1NjNkOTg2NTNlNDBmOCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI2LjYzMTAzMDAwMDAwMDA2NywgLTgxLjg3NjMxOTk5OTk5OTk2XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzhlMDcxNGJhZThmNzQ1MmJiNDM3NGVjZjFlM2Q3NWM5ID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9mNDNiOTc0YTI1Y2M0OGRiYWM0M2EwZGRmOWM0NmI0YyA9ICQoYDxkaXYgaWQ9Imh0bWxfZjQzYjk3NGEyNWNjNDhkYmFjNDNhMGRkZjljNDZiNGMiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPkx1bW11cyBQYXJrIEhpc3RvcmljIERpc3RyaWN0IENsdXN0ZXIgMDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF84ZTA3MTRiYWU4Zjc0NTJiYjQzNzRlY2YxZTNkNzVjOS5zZXRDb250ZW50KGh0bWxfZjQzYjk3NGEyNWNjNDhkYmFjNDNhMGRkZjljNDZiNGMpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfbWFya2VyX2EzMjgzNzQ4ODBjYjQwMTNhMTU2M2Q5ODY1M2U0MGY4LmJpbmRQb3B1cChwb3B1cF84ZTA3MTRiYWU4Zjc0NTJiYjQzNzRlY2YxZTNkNzVjOSkKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV9tYXJrZXJfYTY0MzA1ZTg4YmM4NDAwNTlkZDQ1NGQ0NGRiYzMwMzQgPSBMLmNpcmNsZU1hcmtlcigKICAgICAgICAgICAgICAgIFsyNS44MTIyMzQxNDgxMTQxNjUsIC04MC4xOTQ2NTMwMTA1Nzk1OV0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF80NWIwNGExN2RiZDM0YTllODRiOGQyNGZiMzYyOTMyZSA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYWUyNjhkMmY5Y2Q1NGE0Y2EyMzEyZDYwZTAxNzliMmYgPSAkKGA8ZGl2IGlkPSJodG1sX2FlMjY4ZDJmOWNkNTRhNGNhMjMxMmQ2MGUwMTc5YjJmIiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5NaWFtaSBEZXNpZ24gRGlzdHJpY3QgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzQ1YjA0YTE3ZGJkMzRhOWU4NGI4ZDI0ZmIzNjI5MzJlLnNldENvbnRlbnQoaHRtbF9hZTI2OGQyZjljZDU0YTRjYTIzMTJkNjBlMDE3OWIyZik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfYTY0MzA1ZTg4YmM4NDAwNTlkZDQ1NGQ0NGRiYzMwMzQuYmluZFBvcHVwKHBvcHVwXzQ1YjA0YTE3ZGJkMzRhOWU4NGI4ZDI0ZmIzNjI5MzJlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl83ZTI2MWUzNGIzMDU0ZDdlYjExYWFkN2NiNGVkMmVjMCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc3NDgxMDAwMDAwMDA2LCAtODAuMTk3NzI5OTk5OTk5OThdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MDAwZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwMDBmZiIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMDU0NGVlYmJhMzU1NDdhYThiODUyOTAzMDkyYWUyOTggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2Y0NTM0M2MxZWZhZDRlMTBhZDdiNmM1OTJhMzE1NzI5ID0gJChgPGRpdiBpZD0iaHRtbF9mNDUzNDNjMWVmYWQ0ZTEwYWQ3YjZjNTkyYTMxNTcyOSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+TWlhbWkgSXJvbnNpZGUgQ2x1c3RlciAxPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzA1NDRlZWJiYTM1NTQ3YWE4Yjg1MjkwMzA5MmFlMjk4LnNldENvbnRlbnQoaHRtbF9mNDUzNDNjMWVmYWQ0ZTEwYWQ3YjZjNTkyYTMxNTcyOSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfN2UyNjFlMzRiMzA1NGQ3ZWIxMWFhZDdjYjRlZDJlYzAuYmluZFBvcHVwKHBvcHVwXzA1NDRlZWJiYTM1NTQ3YWE4Yjg1MjkwMzA5MmFlMjk4KQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mM2ZkN2ViYzhiYTE0NTAwYWI4YTFmZWYwMjk0YTIwNSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjgwODk5Mzk1NTk4MTg3NiwgLTgwLjE5MTUwMjcwNjI1ODQzXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzA1OGZhODBlMzBhNzQyZjk4MDkwZjUwZWQzOTAyZGYyID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF82MDYwNjQ3NGNjZjE0MGRjYmVhM2Q2NGYzN2I4YzdlMiA9ICQoYDxkaXYgaWQ9Imh0bWxfNjA2MDY0NzRjY2YxNDBkY2JlYTNkNjRmMzdiOGM3ZTIiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk1pZHRvd24gTWlhbWkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzA1OGZhODBlMzBhNzQyZjk4MDkwZjUwZWQzOTAyZGYyLnNldENvbnRlbnQoaHRtbF82MDYwNjQ3NGNjZjE0MGRjYmVhM2Q2NGYzN2I4YzdlMik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZjNmZDdlYmM4YmExNDUwMGFiOGExZmVmMDI5NGEyMDUuYmluZFBvcHVwKHBvcHVwXzA1OGZhODBlMzBhNzQyZjk4MDkwZjUwZWQzOTAyZGYyKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl84NDAyOGU0ZDVjODc0NTFiYmVmMTE0NzAxZDE0YWQ5ZCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc4ODA1MDAwMDAwMDA1NSwgLTgwLjIwMDkwOTk5OTk5OTk2XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzJmZGMwYmIxNTA1OTRiNTI5NWM3ODQ3MmIxZjdmZWVlID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF81NjJkZDVlMTNmZDc0NDA1OGE0ZjYzNzYxZGQ5ZjMxYSA9ICQoYDxkaXYgaWQ9Imh0bWxfNTYyZGQ1ZTEzZmQ3NDQwNThhNGY2Mzc2MWRkOWYzMWEiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPk92ZXJ0b3duIChNaWFtaSkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzJmZGMwYmIxNTA1OTRiNTI5NWM3ODQ3MmIxZjdmZWVlLnNldENvbnRlbnQoaHRtbF81NjJkZDVlMTNmZDc0NDA1OGE0ZjYzNzYxZGQ5ZjMxYSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfODQwMjhlNGQ1Yzg3NDUxYmJlZjExNDcwMWQxNGFkOWQuYmluZFBvcHVwKHBvcHVwXzJmZGMwYmIxNTA1OTRiNTI5NWM3ODQ3MmIxZjdmZWVlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9jNGM1ZmViNDAwNzQ0NjZiYjE0OTY4MzgyMzU2YzcwOSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc1NDYzOTk3NDQ2NDg1NSwgLTgwLjI5NTY2MDA0ODMyOTFdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNWIzN2U3YTI2NzJkNDgzYTgzMDcwMTM5MGIwMjFiM2UgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzYyOWIwOGExOWM1NDQ2NGQ5OWVkZjZkNmY4NWRmMjY4ID0gJChgPGRpdiBpZD0iaHRtbF82MjliMDhhMTljNTQ0NjRkOTllZGY2ZDZmODVkZjI2OCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UGFyayBXZXN0IChNaWFtaSkgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzViMzdlN2EyNjcyZDQ4M2E4MzA3MDEzOTBiMDIxYjNlLnNldENvbnRlbnQoaHRtbF82MjliMDhhMTljNTQ0NjRkOTllZGY2ZDZmODVkZjI2OCk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfYzRjNWZlYjQwMDc0NDY2YmIxNDk2ODM4MjM1NmM3MDkuYmluZFBvcHVwKHBvcHVwXzViMzdlN2EyNjcyZDQ4M2E4MzA3MDEzOTBiMDIxYjNlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl81YzQ1M2EyMzhhZWI0OWY5YjVlYmYxZWE4YmNhZDM2OSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc2OTg2MDAwMDAwMDA1LCAtODAuMjA3NDg5OTk5OTk5OTVdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiM4MGZmYjQiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzgwZmZiNCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNjk5ZDdiNjBhZjVlNGVkOTg1MTcwNTBjMDIyMDU2N2QgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2I3MDc0OGQwYzlkYTQ5YTNiOWUyNjdlMDkxZmZkOTViID0gJChgPGRpdiBpZD0iaHRtbF9iNzA3NDhkMGM5ZGE0OWEzYjllMjY3ZTA5MWZmZDk1YiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+Uml2ZXJzaWRlIChNaWFtaSkgQ2x1c3RlciAyPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzY5OWQ3YjYwYWY1ZTRlZDk4NTE3MDUwYzAyMjA1NjdkLnNldENvbnRlbnQoaHRtbF9iNzA3NDhkMGM5ZGE0OWEzYjllMjY3ZTA5MWZmZDk1Yik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfNWM0NTNhMjM4YWViNDlmOWI1ZWJmMWVhOGJjYWQzNjkuYmluZFBvcHVwKHBvcHVwXzY5OWQ3YjYwYWY1ZTRlZDk4NTE3MDUwYzAyMjA1NjdkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9mYTlmN2MzNGZiYWE0OTU0OTZhZGExMWY1OGZjZTc3NSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1Ljc4NTU4MDEyNDQwMzQ1MiwgLTgwLjIxMTcwNjIyOTY2NzEzXSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjODAwMGZmIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiM4MDAwZmYiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzY4NzQ0MTE2MmVmMjRiNmM4ZmJiNGZmNWRmYTAwYWVhID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF9lNTY4ZTlkZjRiOWU0ODdhODcyZjk3YmVhNTU5MDZjZSA9ICQoYDxkaXYgaWQ9Imh0bWxfZTU2OGU5ZGY0YjllNDg3YTg3MmY5N2JlYTU1OTA2Y2UiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlNwcmluZyBHYXJkZW4gKE1pYW1pKSBDbHVzdGVyIDE8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNjg3NDQxMTYyZWYyNGI2YzhmYmI0ZmY1ZGZhMDBhZWEuc2V0Q29udGVudChodG1sX2U1NjhlOWRmNGI5ZTQ4N2E4NzJmOTdiZWE1NTkwNmNlKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9mYTlmN2MzNGZiYWE0OTU0OTZhZGExMWY1OGZjZTc3NS5iaW5kUG9wdXAocG9wdXBfNjg3NDQxMTYyZWYyNGI2YzhmYmI0ZmY1ZGZhMDBhZWEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2Q1MjliZDNiMjU1YTRkZDA4NjAzOGRkYjc2YTA2MTE4ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzU1NTYwMDAwMDAwMDYsIC04MC4yMDQ5OTk5OTk5OTk5OF0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF80NjNmYmQ2YmEwYmE0OTdkYTljMWFiYTEyZjgwYmE5ZiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYzNlYTMxNjQ2NzQ5NGY0YzllMmY0ZjdlZGM5YTI1ODUgPSAkKGA8ZGl2IGlkPSJodG1sX2MzZWEzMTY0Njc0OTRmNGM5ZTJmNGY3ZWRjOWEyNTg1IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5UaGUgUm9hZHMgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzQ2M2ZiZDZiYTBiYTQ5N2RhOWMxYWJhMTJmODBiYTlmLnNldENvbnRlbnQoaHRtbF9jM2VhMzE2NDY3NDk0ZjRjOWUyZjRmN2VkYzlhMjU4NSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZDUyOWJkM2IyNTVhNGRkMDg2MDM4ZGRiNzZhMDYxMTguYmluZFBvcHVwKHBvcHVwXzQ2M2ZiZDZiYTBiYTQ5N2RhOWMxYWJhMTJmODBiYTlmKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl80MzNlODE5YTg5NzU0NGQzYjdlOTc1YTM3ZWNlNDk0NCA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjY4NTkwMDAwMDAwMDA2LCAtODAuNDAyNjQ5OTk5OTk5OTRdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfN2QyNmU3NzFlZGUyNGNmY2I2ZGY4OTc4YjE0Y2I2YjggPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2EyYmQyODZiNzQ1MDRlNjhhYzU5OTZjNmQyNmQwMzIyID0gJChgPGRpdiBpZD0iaHRtbF9hMmJkMjg2Yjc0NTA0ZTY4YWM1OTk2YzZkMjZkMDMyMiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VW1vamEgVmlsbGFnZSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfN2QyNmU3NzFlZGUyNGNmY2I2ZGY4OTc4YjE0Y2I2Yjguc2V0Q29udGVudChodG1sX2EyYmQyODZiNzQ1MDRlNjhhYzU5OTZjNmQyNmQwMzIyKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl80MzNlODE5YTg5NzU0NGQzYjdlOTc1YTM3ZWNlNDk0NC5iaW5kUG9wdXAocG9wdXBfN2QyNmU3NzFlZGUyNGNmY2I2ZGY4OTc4YjE0Y2I2YjgpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2MxZDA0N2M1YjA1ODRkODViOWRkN2YxZjM1YzMxNDE5ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuODQwODgwMDAwMDAwMDI3LCAtODAuMTc2MzU5OTk5OTk5OTldLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfMjdlNjA0ZjI0MzU2NGNiMDhiYTkxNjM2NWEyYjMzMWMgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2VkOGQ4ZjE5YTIxMDRiY2JhMGY4ZWU1ZmUyZjI1OTZlID0gJChgPGRpdiBpZD0iaHRtbF9lZDhkOGYxOWEyMTA0YmNiYTBmOGVlNWZlMmYyNTk2ZSIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+VXBwZXIgRWFzdHNpZGUgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzI3ZTYwNGYyNDM1NjRjYjA4YmE5MTYzNjVhMmIzMzFjLnNldENvbnRlbnQoaHRtbF9lZDhkOGYxOWEyMTA0YmNiYTBmOGVlNWZlMmYyNTk2ZSk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfYzFkMDQ3YzViMDU4NGQ4NWI5ZGQ3ZjFmMzVjMzE0MTkuYmluZFBvcHVwKHBvcHVwXzI3ZTYwNGYyNDM1NjRjYjA4YmE5MTYzNjVhMmIzMzFjKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlX21hcmtlcl9lZGE5NmJjNThlZWQ0NDA5YTk1ODg2ZWRmYjE4YWE3MSA9IEwuY2lyY2xlTWFya2VyKAogICAgICAgICAgICAgICAgWzI1LjczMzI0OTIyNDE5NjM1MywgLTgwLjI0MTY2MjUwMDEzMjU5XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjZmYwMDAwIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiNmZjAwMDAiLCAiZmlsbE9wYWNpdHkiOiAwLjcsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNzg1YTU5NTAzZjdiNGMzMWI5MzRhYTFmZjk2MTE1YjApOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzk4Y2U3NDk0ODA2MjQ1YThhYjYzZTliODZlYjgwMjRkID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF85YjJkMzc5OTcwZTQ0Yzk5ODFlMjE5YmVkNmZkZWY4NyA9ICQoYDxkaXYgaWQ9Imh0bWxfOWIyZDM3OTk3MGU0NGM5OTgxZTIxOWJlZDZmZGVmODciIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlZpcmdpbmlhIEtleSBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfOThjZTc0OTQ4MDYyNDVhOGFiNjNlOWI4NmViODAyNGQuc2V0Q29udGVudChodG1sXzliMmQzNzk5NzBlNDRjOTk4MWUyMTliZWQ2ZmRlZjg3KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl9lZGE5NmJjNThlZWQ0NDA5YTk1ODg2ZWRmYjE4YWE3MS5iaW5kUG9wdXAocG9wdXBfOThjZTc0OTQ4MDYyNDVhOGFiNjNlOWI4NmViODAyNGQpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyXzNiMDQwMjIyNTE3ZDRlMGRiN2FjYTczYjc4NjEzZTdjID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzg0ODIwMDAwMDAwMDI1LCAtODAuMTczOTM5OTk5OTk5OTZdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiNmZjAwMDAiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiI2ZmMDAwMCIsICJmaWxsT3BhY2l0eSI6IDAuNywgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNSwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF83ODVhNTk1MDNmN2I0YzMxYjkzNGFhMWZmOTYxMTViMCk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfNzdiOTdjYWU2YjIzNDU4OWEwYzdhZjNlNDM2NjFlYmEgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sX2I1ODQ5NGYwOGUyNjQ3OTJhNjc1YjAwN2NlOTY1ZTBmID0gJChgPGRpdiBpZD0iaHRtbF9iNTg0OTRmMDhlMjY0NzkyYTY3NWIwMDdjZTk2NWUwZiIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+V2F0c29uIElzbGFuZCBDbHVzdGVyIDA8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfNzdiOTdjYWU2YjIzNDU4OWEwYzdhZjNlNDM2NjFlYmEuc2V0Q29udGVudChodG1sX2I1ODQ5NGYwOGUyNjQ3OTJhNjc1YjAwN2NlOTY1ZTBmKTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX21hcmtlcl8zYjA0MDIyMjUxN2Q0ZTBkYjdhY2E3M2I3ODYxM2U3Yy5iaW5kUG9wdXAocG9wdXBfNzdiOTdjYWU2YjIzNDU4OWEwYzdhZjNlNDM2NjFlYmEpCiAgICAgICAgOwoKICAgICAgICAKICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfbWFya2VyX2ZkZmM0ZmUzYTE2YTQxMzhhYTQzNmUxZmNlMzQ2MDA0ID0gTC5jaXJjbGVNYXJrZXIoCiAgICAgICAgICAgICAgICBbMjUuNzY4MTQwODk2NjEyOTUsIC04MC4zODUyMjc4MDgzODU2Nl0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiI2ZmMDAwMCIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjZmYwMDAwIiwgImZpbGxPcGFjaXR5IjogMC43LCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1LCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzc4NWE1OTUwM2Y3YjRjMzFiOTM0YWExZmY5NjExNWIwKTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF85ZjU5ZjBlNWZmYTY0M2I5YTg0OWVhMGIyNmRiMjg5ZCA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfNjk0MzkxNzMzMWUzNDlmNmE4NzNlNDIwMTU3MTI4MzYgPSAkKGA8ZGl2IGlkPSJodG1sXzY5NDM5MTczMzFlMzQ5ZjZhODczZTQyMDE1NzEyODM2IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5XZXN0IEZsYWdsZXIgQ2x1c3RlciAwPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwXzlmNTlmMGU1ZmZhNjQzYjlhODQ5ZWEwYjI2ZGIyODlkLnNldENvbnRlbnQoaHRtbF82OTQzOTE3MzMxZTM0OWY2YTg3M2U0MjAxNTcxMjgzNik7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV9tYXJrZXJfZmRmYzRmZTNhMTZhNDEzOGFhNDM2ZTFmY2UzNDYwMDQuYmluZFBvcHVwKHBvcHVwXzlmNTlmMGU1ZmZhNjQzYjlhODQ5ZWEwYjI2ZGIyODlkKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKPC9zY3JpcHQ+ onload=\"this.contentDocument.open();this.contentDocument.write(atob(this.getAttribute('data-html')));this.contentDocument.close();\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>"
      ],
      "text/plain": [
       "<folium.folium.Map at 0x7fc070754358>"
      ]
     },
     "execution_count": 320,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "## create map\n",
    "map_clusters = folium.Map(location=[latitude, longitude], zoom_start=11)\n",
    "\n",
    "# set color scheme for the clusters\n",
    "x = np.arange(kclusters)\n",
    "ys = [i + x + (i*x)**2 for i in range(kclusters)]\n",
    "colors_array = cm.rainbow(np.linspace(0, 1, len(ys)))\n",
    "rainbow = [colors.rgb2hex(i) for i in colors_array]\n",
    "\n",
    "# add markers to the map\n",
    "markers_colors = []\n",
    "for lat, lon, poi, cluster in zip(miami_merged['Latitude'], miami_merged['Longitude'], miami_merged['Neighborhood'], miami_merged['Cluster Labels']):\n",
    "    label = folium.Popup(str(poi) + ' Cluster ' + str(cluster), parse_html=True)\n",
    "    folium.CircleMarker(\n",
    "        [lat, lon],\n",
    "        radius=5,\n",
    "        popup=label,\n",
    "        color=rainbow[cluster-1],\n",
    "        fill=True,\n",
    "        fill_color=rainbow[cluster-1],\n",
    "        fill_opacity=0.7).add_to(map_clusters)\n",
    "       \n",
    "map_clusters"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 321,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>index</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>Allapattah</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>3</td>\n",
       "      <td>25.802150</td>\n",
       "      <td>-80.223630</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>Biscayne Boulevard Historic District</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>5</td>\n",
       "      <td>25.878823</td>\n",
       "      <td>-80.167661</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>Biscayne Island, Miami</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>6</td>\n",
       "      <td>25.815824</td>\n",
       "      <td>-80.188542</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>Buena Vista (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>9</td>\n",
       "      <td>25.810522</td>\n",
       "      <td>-80.193133</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>Central Business District (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>10</td>\n",
       "      <td>25.796810</td>\n",
       "      <td>-80.273596</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>Coral Way</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>12</td>\n",
       "      <td>25.755330</td>\n",
       "      <td>-80.222180</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>Edgewater (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>14</td>\n",
       "      <td>25.707076</td>\n",
       "      <td>-80.259618</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>Flagami</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>15</td>\n",
       "      <td>25.762710</td>\n",
       "      <td>-80.315870</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>Grapeland Heights</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>17</td>\n",
       "      <td>25.788190</td>\n",
       "      <td>-80.256110</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>Liberty City (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>20</td>\n",
       "      <td>25.910870</td>\n",
       "      <td>-80.200070</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>Little Haiti</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>21</td>\n",
       "      <td>25.828640</td>\n",
       "      <td>-80.198330</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>Little Havana</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>22</td>\n",
       "      <td>25.893780</td>\n",
       "      <td>-80.162320</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>Lummus Park Historic District</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>24</td>\n",
       "      <td>26.631030</td>\n",
       "      <td>-81.876320</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>Miami Design District</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>13</td>\n",
       "      <td>25.812234</td>\n",
       "      <td>-80.194653</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>Midtown Miami</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>26</td>\n",
       "      <td>25.808994</td>\n",
       "      <td>-80.191503</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>Overtown (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>28</td>\n",
       "      <td>25.788050</td>\n",
       "      <td>-80.200910</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>Park West (Miami)</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>29</td>\n",
       "      <td>25.754640</td>\n",
       "      <td>-80.295660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>The Roads</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>31</td>\n",
       "      <td>25.755560</td>\n",
       "      <td>-80.205000</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>Umoja Village</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>32</td>\n",
       "      <td>25.685900</td>\n",
       "      <td>-80.402650</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>30</th>\n",
       "      <td>Upper Eastside</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>33</td>\n",
       "      <td>25.840880</td>\n",
       "      <td>-80.176360</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>31</th>\n",
       "      <td>Virginia Key</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>34</td>\n",
       "      <td>25.733249</td>\n",
       "      <td>-80.241663</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>32</th>\n",
       "      <td>Watson Island</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>35</td>\n",
       "      <td>25.784820</td>\n",
       "      <td>-80.173940</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>33</th>\n",
       "      <td>West Flagler</td>\n",
       "      <td>0.0</td>\n",
       "      <td>0</td>\n",
       "      <td>36</td>\n",
       "      <td>25.768141</td>\n",
       "      <td>-80.385228</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                            Neighborhood  Hotel  Cluster Labels  index  \\\n",
       "0                             Allapattah    0.0               0      3   \n",
       "2   Biscayne Boulevard Historic District    0.0               0      5   \n",
       "3                 Biscayne Island, Miami    0.0               0      6   \n",
       "6                    Buena Vista (Miami)    0.0               0      9   \n",
       "7      Central Business District (Miami)    0.0               0     10   \n",
       "9                              Coral Way    0.0               0     12   \n",
       "10                     Edgewater (Miami)    0.0               0     14   \n",
       "11                               Flagami    0.0               0     15   \n",
       "13                     Grapeland Heights    0.0               0     17   \n",
       "16                  Liberty City (Miami)    0.0               0     20   \n",
       "17                          Little Haiti    0.0               0     21   \n",
       "18                         Little Havana    0.0               0     22   \n",
       "20         Lummus Park Historic District    0.0               0     24   \n",
       "21                 Miami Design District    0.0               0     13   \n",
       "23                         Midtown Miami    0.0               0     26   \n",
       "24                      Overtown (Miami)    0.0               0     28   \n",
       "25                     Park West (Miami)    0.0               0     29   \n",
       "28                             The Roads    0.0               0     31   \n",
       "29                         Umoja Village    0.0               0     32   \n",
       "30                        Upper Eastside    0.0               0     33   \n",
       "31                          Virginia Key    0.0               0     34   \n",
       "32                         Watson Island    0.0               0     35   \n",
       "33                          West Flagler    0.0               0     36   \n",
       "\n",
       "     Latitude  Longitude  \n",
       "0   25.802150 -80.223630  \n",
       "2   25.878823 -80.167661  \n",
       "3   25.815824 -80.188542  \n",
       "6   25.810522 -80.193133  \n",
       "7   25.796810 -80.273596  \n",
       "9   25.755330 -80.222180  \n",
       "10  25.707076 -80.259618  \n",
       "11  25.762710 -80.315870  \n",
       "13  25.788190 -80.256110  \n",
       "16  25.910870 -80.200070  \n",
       "17  25.828640 -80.198330  \n",
       "18  25.893780 -80.162320  \n",
       "20  26.631030 -81.876320  \n",
       "21  25.812234 -80.194653  \n",
       "23  25.808994 -80.191503  \n",
       "24  25.788050 -80.200910  \n",
       "25  25.754640 -80.295660  \n",
       "28  25.755560 -80.205000  \n",
       "29  25.685900 -80.402650  \n",
       "30  25.840880 -80.176360  \n",
       "31  25.733249 -80.241663  \n",
       "32  25.784820 -80.173940  \n",
       "33  25.768141 -80.385228  "
      ]
     },
     "execution_count": 321,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "#Examine clusters\n",
    "miami_merged.loc[miami_merged['Cluster Labels'] == 0]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 322,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>index</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>Arts &amp; Entertainment District</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>1</td>\n",
       "      <td>4</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>Brickell Key</td>\n",
       "      <td>0.057143</td>\n",
       "      <td>1</td>\n",
       "      <td>8</td>\n",
       "      <td>25.765775</td>\n",
       "      <td>-80.186095</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>Coconut Grove</td>\n",
       "      <td>0.035714</td>\n",
       "      <td>1</td>\n",
       "      <td>11</td>\n",
       "      <td>25.732330</td>\n",
       "      <td>-80.254140</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>Government Center (Miami)</td>\n",
       "      <td>0.047619</td>\n",
       "      <td>1</td>\n",
       "      <td>16</td>\n",
       "      <td>25.775050</td>\n",
       "      <td>-80.195660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>Greater Downtown Miami</td>\n",
       "      <td>0.070707</td>\n",
       "      <td>1</td>\n",
       "      <td>18</td>\n",
       "      <td>25.769130</td>\n",
       "      <td>-80.189980</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>Health District (Miami)</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>1</td>\n",
       "      <td>19</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>Little River (Miami)</td>\n",
       "      <td>0.062500</td>\n",
       "      <td>1</td>\n",
       "      <td>23</td>\n",
       "      <td>25.846002</td>\n",
       "      <td>-80.175063</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>Miami Ironside</td>\n",
       "      <td>0.066667</td>\n",
       "      <td>1</td>\n",
       "      <td>25</td>\n",
       "      <td>25.774810</td>\n",
       "      <td>-80.197730</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>Spring Garden (Miami)</td>\n",
       "      <td>0.055556</td>\n",
       "      <td>1</td>\n",
       "      <td>30</td>\n",
       "      <td>25.785580</td>\n",
       "      <td>-80.211706</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                     Neighborhood     Hotel  Cluster Labels  index   Latitude  \\\n",
       "1   Arts & Entertainment District  0.066667               1      4  25.774810   \n",
       "5                    Brickell Key  0.057143               1      8  25.765775   \n",
       "8                   Coconut Grove  0.035714               1     11  25.732330   \n",
       "12      Government Center (Miami)  0.047619               1     16  25.775050   \n",
       "14         Greater Downtown Miami  0.070707               1     18  25.769130   \n",
       "15        Health District (Miami)  0.066667               1     19  25.774810   \n",
       "19           Little River (Miami)  0.062500               1     23  25.846002   \n",
       "22                 Miami Ironside  0.066667               1     25  25.774810   \n",
       "27          Spring Garden (Miami)  0.055556               1     30  25.785580   \n",
       "\n",
       "    Longitude  \n",
       "1  -80.197730  \n",
       "5  -80.186095  \n",
       "8  -80.254140  \n",
       "12 -80.195660  \n",
       "14 -80.189980  \n",
       "15 -80.197730  \n",
       "19 -80.175063  \n",
       "22 -80.197730  \n",
       "27 -80.211706  "
      ]
     },
     "execution_count": 322,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "miami_merged.loc[miami_merged['Cluster Labels'] == 1]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 323,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Neighborhood</th>\n",
       "      <th>Hotel</th>\n",
       "      <th>Cluster Labels</th>\n",
       "      <th>index</th>\n",
       "      <th>Latitude</th>\n",
       "      <th>Longitude</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>Brickell</td>\n",
       "      <td>0.094340</td>\n",
       "      <td>2</td>\n",
       "      <td>7</td>\n",
       "      <td>25.764287</td>\n",
       "      <td>-80.192557</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>Riverside (Miami)</td>\n",
       "      <td>0.105263</td>\n",
       "      <td>2</td>\n",
       "      <td>27</td>\n",
       "      <td>25.769860</td>\n",
       "      <td>-80.207490</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "         Neighborhood     Hotel  Cluster Labels  index   Latitude  Longitude\n",
       "4            Brickell  0.094340               2      7  25.764287 -80.192557\n",
       "26  Riverside (Miami)  0.105263               2     27  25.769860 -80.207490"
      ]
     },
     "execution_count": 323,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "miami_merged.loc[miami_merged['Cluster Labels'] == 2]"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3.6",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.9"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
